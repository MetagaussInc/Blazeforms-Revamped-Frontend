(self.webpackChunkblaze_forms=self.webpackChunkblaze_forms||[]).push([[407],{25803:(e,t,o)=>{"use strict";o.d(t,{J:()=>c});var i="https://js.stripe.com/v3",n=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,r=null,s=function(e,t,o){if(null===e)return null;var i=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.19.1",startTime:t})}(i,o),i},l=Promise.resolve().then(function(){return null,null!==r?r:r=new Promise(function(e,t){if("undefined"!=typeof window)if(window,window.Stripe)e(window.Stripe);else try{var o=function(){for(var e=document.querySelectorAll('script[src^="'.concat(i,'"]')),t=0;t<e.length;t++){var o=e[t];if(n.test(o.src))return o}return null}();o||(o=function(e){var t=document.createElement("script");t.src="".concat(i).concat("");var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(t),t}()),o.addEventListener("load",function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}),o.addEventListener("error",function(){t(new Error("Failed to load Stripe.js"))})}catch(r){return void t(r)}else e(null)})}),d=!1;l.catch(function(e){d||console.warn(e)});var c=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];d=!0;var i=Date.now();return l.then(function(e){return s(e,t,i)})}},85407:(e,t,o)=>{"use strict";o.r(t),o.d(t,{FormModule:()=>Ge});var i=o(38583),n=o(67310),r=o(16304),s=o(99336),l=o(23815),d=o(37716),c=o(30526),a=o(39075),u=o(62595);function m(e,t){1&e&&(d.TgZ(0,"h5",8),d._uU(1,"New Form"),d.qZA())}function p(e,t){1&e&&(d.TgZ(0,"h5",8),d._uU(1,"Copy Existing Form"),d.qZA())}function f(e,t){1&e&&(d.TgZ(0,"h5",8),d._uU(1,"Copy Existing Workflow"),d.qZA())}function g(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",9),d.TgZ(2,"div",10),d.TgZ(3,"div",11),d.TgZ(4,"button",12),d.NdJ("click",function(){return d.CHM(e),d.oxw().openEdit("Form")}),d._uU(5,"Add Form"),d.qZA(),d.TgZ(6,"div"),d._uU(7,"Or"),d.qZA(),d.TgZ(8,"div"),d.TgZ(9,"a",13),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.viewFormsList="Form",t.viewMainSection=!1}),d._uU(10,"Copy Existing Form "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",10),d.TgZ(12,"div",11),d.TgZ(13,"button",14),d.NdJ("click",function(){return d.CHM(e),d.oxw().openEdit("WorkFlow")}),d._uU(14,"Add Workflow"),d.qZA(),d.TgZ(15,"div"),d._uU(16,"Or"),d.qZA(),d.TgZ(17,"div"),d.TgZ(18,"a",15),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.viewFormsList="WorkFlow",t.viewMainSection=!1}),d._uU(19,"Copy Existing Workflow"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"div",16),d.TgZ(21,"div",17),d.TgZ(22,"h6"),d._uU(23,"Choose from a template"),d.qZA(),d.qZA(),d.TgZ(24,"div",18),d.TgZ(25,"div",19),d.TgZ(26,"div",20),d.TgZ(27,"div",21),d._UZ(28,"img",22),d.TgZ(29,"div",23),d.TgZ(30,"b",24),d._uU(31,"Template Title"),d.qZA(),d.TgZ(32,"p",25),d._uU(33,"This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer."),d.qZA(),d.TgZ(34,"button",26),d._uU(35,"Use Template"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(36,"div",20),d.TgZ(37,"div",21),d._UZ(38,"img",22),d._UZ(39,"div",27),d.qZA(),d.qZA(),d.TgZ(40,"div",20),d.TgZ(41,"div",21),d._UZ(42,"img",22),d._UZ(43,"div",27),d.qZA(),d.qZA(),d.TgZ(44,"div",20),d.TgZ(45,"div",21),d._UZ(46,"img",28),d._UZ(47,"div",27),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.BQk()}}function h(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",34),d.TgZ(1,"span",35),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).viewForm(t)}),d._uU(2),d.qZA(),d.TgZ(3,"span",36),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).copy(t)}),d.TgZ(4,"i",37),d._uU(5,"content_copy"),d.qZA(),d.qZA(),d.TgZ(6,"span",38),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).viewForm(t)}),d.TgZ(7,"i",37),d._uU(8,"visibility"),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.xp6(2),d.Oqu(e.name)}}function Z(e,t){if(1&e&&(d.ynx(0),d.YNc(1,h,9,1,"div",33),d.BQk()),2&e){const e=t.$implicit,o=d.oxw(2);d.xp6(1),d.Q6J("ngIf",o.viewFormsList===e.formType)}}function v(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",29),d.YNc(2,Z,2,1,"ng-container",30),d.qZA(),d.TgZ(3,"div",31),d.TgZ(4,"button",32),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.viewFormsList=null,t.viewMainSection=!0}),d._uU(5,"Back"),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=d.oxw();d.xp6(2),d.Q6J("ngForOf",e.formsList)}}function b(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",29),d._UZ(2,"iframe",39),d.qZA(),d.TgZ(3,"div",31),d.TgZ(4,"button",32),d.NdJ("click",function(){return d.CHM(e),d.oxw().viewFormDesign=!1}),d._uU(5,"Back"),d.qZA(),d.TgZ(6,"button",40),d.NdJ("click",function(){return d.CHM(e),d.oxw().copyFromDesign()}),d._uU(7,"Copy"),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=d.oxw();d.xp6(2),d.Q6J("src",e.FormUrl(),d.uOi)}}let w=(()=>{class e{constructor(e,t,o,i){this.router=e,this.activeModal=t,this.sanitizer=o,this.http=i,this.openEditEvent=new d.vpe,this.viewFormsList=null,this.viewFormDesign=!1,this.viewMainSection=!0,this.url="",this.selectedForm=null,this.selectedFormDetail=null}ngOnChanges(){}ngOnInit(){console.log(this.formsList)}openEdit(e){this.activeModal.close(e)}copy(e){this.selectedForm=e,this.getForm()}viewForm(e){this.url=e.url,this.selectedForm=e,this.viewFormDesign=!0}copyFromDesign(){this.getForm()}FormUrl(){var e,t,o,i,n;return this.sanitizer.bypassSecurityTrustResourceUrl((null===(t=null===(e=window.location.href)||void 0===e?void 0:e.split("#"))||void 0===t?void 0:t[0])+`#/${null===(n=null===(i=null===(o=this.url)||void 0===o?void 0:o.split("#"))||void 0===i?void 0:i[1])||void 0===n?void 0:n.replace("BlazeForms","blazeforms")}`)}getForm(){this.http.call("GetFormDesign","POST",{FormEntriesId:null,Id:this.selectedForm.id,Name:null,WorkSpaceName:null,userID:this.userId}).subscribe(e=>{this.selectedFormDetail=e,this.copyAttributes(e)})}copyAttributes(e){const t={CreatedBy:e.createdBy,DependenciesJSON:e.dependenciesJSON,Description:e.description,FormNewJSON:e.formNewJSON,FormSettings:e.formSettings,FormStyleJson:e.formStyleJson,FormType:e.formType,Id:e.id,Name:this.getNewFormName(e.name+"copy "),SubmissionButtonName:e.submissionButtonName,SubmissionDependenciesJSON:e.submissionDependenciesJSON,SubmissionSettings:e.submissionSettings,WorkSpaceId:e.workSpaceId,formLabels:e.formLabels,modifiedBy:e.modifiedBy,miscellaneousJSON:e.miscellaneousJSON};this.http.call("CopyFormAttributes","POST",t).subscribe(e=>{this.router.navigate(["/form-builder"],{queryParams:{ID:e.id,seletedTab:1}}),this.activeModal.close("close")})}getRandomIntInclusive(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}getNewFormName(e){return e+this.getRandomIntInclusive(0,10)}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(n.F0),d.Y36(c.Kz),d.Y36(a.H7),d.Y36(u.O))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-add-form-modal"]],inputs:{formsList:"formsList",userId:"userId"},outputs:{openEditEvent:"openEditEvent"},features:[d.TTD],decls:13,vars:6,consts:[["tabindex","-1","id","add-form-workflow-modal",1,""],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-title"],[1,"row","py-3"],[1,"col-md-6","d-flex","d-wrap","justify-content-center","align-content-center","py-5"],[1,"add-form-area","text-center"],["type","button","data-bs-dismiss","modal",1,"btn","btn-bf","btn-sm","mb-2",3,"click"],["href","#",1,"",3,"click"],["type","button",1,"btn","btn-bf","btn-sm","mb-2",3,"click"],["href","#",3,"click"],[1,"choose-template-area","row","border-top","pt-3"],[1,"col-md-12","text-center"],[1,"col-md-12","template-cards"],[1,"row","pt-3","g-2"],[1,"col-md-3"],[1,"card","text-center"],["src","assets/images/form.png","alt","...",1,"card-img"],[1,"card-img-overlay","bg-bf-light"],[1,"card-title"],[1,"card-text","small","text-secondary"],["type","button",1,"btn","btn-bf","btn-sm"],[1,"card-img-overlay"],["src","../../../assets/images/form.png","alt","...",1,"card-img"],[1,"forms-list","col-md-12","border","rounded","form-list"],[4,"ngFor","ngForOf"],[1,"modal-footer","border-0"],["type","button",1,"btn","btn-link","btn-sm","text-bf",3,"click"],["class","form-list-item row p-3 border-bottom",4,"ngIf"],[1,"form-list-item","row","p-3","border-bottom"],["role","button",3,"click"],["data-toggle","tooltip","title","Copy","role","button",2,"position","absolute","right","100px",3,"click"],[1,"material-icons"],["role","button","data-toggle","tooltip","title","View",2,"position","absolute","right","50px",3,"click"],["width","700px","height","480px","frameborder","0",3,"src"],["type","button",1,"btn","btn-bf","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.YNc(3,m,2,0,"h5",3),d.YNc(4,p,2,0,"h5",3),d.YNc(5,f,2,0,"h5",3),d.TgZ(6,"button",4),d.NdJ("click",function(){return t.activeModal.close("close")}),d.TgZ(7,"span",5),d._uU(8,"\xd7"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"div",6),d.YNc(10,g,48,0,"ng-container",7),d.YNc(11,v,6,1,"ng-container",7),d.YNc(12,b,8,1,"ng-container",7),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(3),d.Q6J("ngIf",t.viewMainSection),d.xp6(1),d.Q6J("ngIf",!t.viewMainSection&&"Form"===t.viewFormsList),d.xp6(1),d.Q6J("ngIf",!t.viewMainSection&&"WorkFlow"===t.viewFormsList),d.xp6(5),d.Q6J("ngIf",t.viewMainSection),d.xp6(1),d.Q6J("ngIf",t.viewFormsList&&!t.viewFormDesign),d.xp6(1),d.Q6J("ngIf",t.viewFormDesign))},directives:[i.O5,i.sg],styles:[".disabled[_ngcontent-%COMP%]{color:grey;pointer-events:none}.form-list[_ngcontent-%COMP%]{overflow-y:scroll;max-height:500px}"]}),e})();var x=o(3679),A=o(54395),T=o(88002),F=o(24972),q=o(1933),I=o(76627);function k(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-tree-node",9),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw(2).select(t)}),d._UZ(1,"button",10),d.TgZ(2,"span",11),d._uU(3,"folder"),d.qZA(),d.TgZ(4,"span",12),d._uU(5),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,o=d.oxw(2);d.Udp("display",0===o.searchedString.length||e.fullFolderPath.includes(null==o.searchedString?null:o.searchedString.toLowerCase())?"block":"none !important"),d.xp6(5),d.Oqu(e.text)}}function y(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-tree-node",13),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw(2).select(t)}),d.TgZ(1,"button",14),d.TgZ(2,"mat-icon",15),d._uU(3),d.qZA(),d.TgZ(4,"span",11),d._uU(5,"folder"),d.qZA(),d.qZA(),d.TgZ(6,"div",16),d.TgZ(7,"span",12),d._uU(8),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,o=d.oxw(2);d.Udp("display",0===o.searchedString.length||e.fullFolderPath.includes(null==o.searchedString?null:o.searchedString.toLowerCase())?"block":"none !important"),d.xp6(1),d.uIk("aria-label","Toggle "+e.text),d.xp6(2),d.hij(" ",o.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),d.xp6(5),d.Oqu(e.text)}}function _(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",3),d.TgZ(1,"div",4),d.TgZ(2,"input",5),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().searchedString=t})("keyup",function(t){return d.CHM(e),d.oxw().search(t)}),d.qZA(),d.qZA(),d.TgZ(3,"mat-tree",6),d.YNc(4,k,6,3,"mat-tree-node",7),d.YNc(5,y,9,5,"mat-tree-node",8),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(2),d.Q6J("ngModel",e.searchedString),d.xp6(1),d.Q6J("dataSource",e.dataSource)("treeControl",e.treeControl),d.xp6(2),d.Q6J("matTreeNodeDefWhen",e.hasChild)}}let N=(()=>{class e{constructor(){this.selectFolderEvent=new d.vpe,this.selectFolderLevel=new d.vpe,this.selected="Root",this.searchedString="",this.viewDropDown=!1,this.selectedFormId="",this._transformer=(e,t)=>({expandable:!!e.children&&e.children.length>0,text:e.text,level:t,fullFolderPath:e.fullFolderPath,value:e.value}),this.treeControl=new F.C2(e=>e.level,e=>e.expandable),this.treeFlattener=new q.JZ(this._transformer,e=>e.level,e=>e.expandable,e=>e.children),this.dataSource=new q.kc(this.treeControl,this.treeFlattener),this.hasChild=(e,t)=>t.expandable}search(e){var t;(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value.length)>0?this.treeControl.expandAll():this.treeControl.collapseAll()}ExtractChild(e,t,o){t.forEach(t=>{t.fullFolderPath="",t.fullFolderPath+="/"+t.text.toLowerCase(),t.level=o+1,e.forEach(e=>{e.fullFolderPath+="/"+t.text.toLowerCase()});const i=[];i.push(...e),i.push(t),this.currentFormId===(null==t?void 0:t.value)&&(this.selected=t.text),t.children&&this.ExtractChild(i,t.children,t.level)})}select(e){console.log(e),this.selectedFormId=e.value,this.selected=e.text,this.treeControl.collapseAll(),this.viewDropDown=!1,this.selectFolderEvent.emit(e.value),this.selectFolderLevel.emit(e.level)}ngOnChanges(e){this.init()}ngOnInit(){this.init()}init(){const e=[{text:"Root",main:!0,level:1,children:this.data}];null==e||e.forEach(e=>{var t;e.fullFolderPath="",this.currentFormId===(null==e?void 0:e.value)&&(this.selected=e.text),e.fullFolderPath+="/"+(null===(t=null==e?void 0:e.text)||void 0===t?void 0:t.toLowerCase());const o=[];o.push(e),e.children&&this.ExtractChild(o,e.children,e.level)}),console.log(e),this.dataSource.data=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-t-select"]],inputs:{data:"data",currentFormId:"currentFormId"},outputs:{selectFolderEvent:"selectFolderEvent",selectFolderLevel:"selectFolderLevel"},features:[d.TTD],decls:5,vars:2,consts:[[1,"folder-tree-selector","form-control","pt-2",3,"click"],["role","button",1,"material-icons","float-right"],["class","folder-tree-wrap filter-dropdown bg-white rounded shadow",4,"ngIf"],[1,"folder-tree-wrap","filter-dropdown","bg-white","rounded","shadow"],[1,"p-3"],["id","folder-search","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"folder-tree-node","overflow-auto","py-2",3,"dataSource","treeControl"],["matTreeNodePadding","","class","cdk-tree-node  d-flex mat-tree-node ng-star-inserted ",3,"display","click",4,"matTreeNodeDef"],["matTreeNodePadding","","class","d-flex",3,"display","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","",1,"cdk-tree-node","d-flex","mat-tree-node","ng-star-inserted",3,"click"],["mat-icon-button","","disabled","",1,"mat-focus-indicator","mat-icon-button","mat-button-base","mat-button-disabled"],[1,"material-icons-outlined"],[2,"cursor","pointer"],["matTreeNodePadding","",1,"d-flex",3,"click"],["mat-icon-button","","matTreeNodeToggle","",1,"mat-focus-indicator","mat-icon-button","mat-button-base"],[1,"mat-icon-rtl-mirror"],[1,"folder-name"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.NdJ("click",function(){return t.viewDropDown=!t.viewDropDown}),d._uU(1),d.TgZ(2,"span",1),d._uU(3," arrow_drop_down "),d.qZA(),d.qZA(),d.YNc(4,_,6,4,"div",2)),2&e&&(d.xp6(1),d.hij(" ",t.selected,""),d.xp6(3),d.Q6J("ngIf",t.viewDropDown))},directives:[i.O5,x.Fj,x.JJ,x.On,q.gi,q.fQ,q.uo,q.ah,q.eu,I.Hw],styles:[".mat-tree-node[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:20px}.folder-tree-wrap[_ngcontent-%COMP%] > .folder-tree-node[_ngcontent-%COMP%]{max-height:130px}.mat-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:initial;text-align:center;margin:0;overflow:visible}mat-tree-node[_ngcontent-%COMP%]:hover{color:#f04564}.mat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{color:inherit;background:#0000}.mat-button-focus-overlay[_ngcontent-%COMP%], .mat-button-ripple.mat-ripple[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}"]}),e})();function U(e,t){1&e&&(d.TgZ(0,"div",27),d._uU(1,"Name is required "),d.qZA())}function S(e,t){1&e&&(d.TgZ(0,"div",27),d._uU(1," Folder Name is already exist"),d.qZA())}function C(e,t){if(1&e&&(d.ynx(0),d.YNc(1,U,2,0,"div",26),d.YNc(2,S,2,0,"div",26),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",(null==e.f.name.errors?null:e.f.name.errors.required)||(null==e.f.name.errors?null:e.f.name.errors.pattern)),d.xp6(1),d.Q6J("ngIf",null==e.f.name.errors?null:e.f.name.errors.isExists)}}function J(e,t){1&e&&(d.TgZ(0,"div",27),d._uU(1,"Last Name is required "),d.qZA())}function M(e,t){if(1&e&&(d.ynx(0),d.YNc(1,J,2,0,"div",26),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",(null==e.f.desc.errors?null:e.f.desc.errors.required)||(null==e.f.desc.errors?null:e.f.desc.errors.pattern))}}function P(e,t){1&e&&(d.TgZ(0,"div",28),d._uU(1," You can add folder upto five levels "),d.qZA())}let E=(()=>{class e{constructor(e,t,o){this.http=e,this.activeModal=t,this.modalService=o,this.selectedLevel=0,this.newFolderDef=new x.cw({name:new x.NI("",[x.kI.required],this.validateNameViaServer.bind(this)),desc:new x.NI("",[x.kI.required]),folder:new x.NI("",[x.kI.required,x.kI.minLength(10)]),active:new x.NI(!1)})}ngOnInit(){}selectFolderEventHandler(e){var t;null===(t=this.folder)||void 0===t||t.setValue(e)}save(){var e;const t={Description:this.newFolderDef.value.desc,IsActive:this.newFolderDef.value.active,Name:this.newFolderDef.value.name,ParentId:(null===(e=this.newFolderDef.value.folder)||void 0===e?void 0:e.length)>0?this.newFolderDef.value.folder:null,SessionUser:this.userId,WorkSpaceId:this.workSpaceId};this.http.call("SaveFolderAttributes","POST",t).subscribe(e=>{console.log(e),this.close()})}close(){this.activeModal.close("Folder Added")}validateNameViaServer({value:e}){return this.http.call("ValidateFolderName","POST",{Name:e,WorkSpaceId:this.workSpaceId}).pipe((0,A.b)(1e3),(0,T.U)(e=>e.id?{isExists:!0}:null))}selectFolderLevelHandler(e){this.selectedLevel=e}openAddNewFolderModal(){const t=this.modalService.open(e,{size:"lg"});t.componentInstance.folderList=this.folderList,t.componentInstance.workSpaceId=this.workSpaceId,t.componentInstance.userId=this.userId,t.result.then(e=>{},e=>{console.log("Dismissed ")})}get name(){return this.newFolderDef.get("name")}get desc(){return this.newFolderDef.get("desc")}get folder(){return this.newFolderDef.get("folder")}get active(){return this.newFolderDef.get("active")}get f(){return this.newFolderDef.controls}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.O),d.Y36(c.Kz),d.Y36(c.FF))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-add-new-folder"]],inputs:{folderList:"folderList",form:"form",workSpaceId:"workSpaceId",userId:"userId"},decls:45,vars:7,consts:[["tabindex","-1","id","copy-form-workflow-modal"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],[3,"formGroup","keyup.enter"],[1,"row","my-4","px-4","form-group"],[1,"col-md-3"],["for","form-name"],[1,"col-md-7"],["type","text","formControlName","name","placeholder","Name",1,"form-control"],[4,"ngIf"],["for","form-desc"],["type","text","formControlName","desc","placeholder","Description",1,"form-control"],["for","form-folder",3,"click"],[3,"data","currentFormId","selectFolderEvent","selectFolderLevel"],[1,"col-md-2","p-2"],["class","field-error text-right mt-1 pr-2 small offset-7",4,"ngIf"],["for","form-status"],[1,"custom-control","custom-switch"],["type","checkbox","formControlName","active",1,"custom-control-input"],["for","bf_active_form",1,"custom-control-label"],[1,"modal-footer","border-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-link","btn-sm","text-bf"],["type","button",1,"btn","btn-bf","btn-sm",3,"disabled","click"],["class","field-error text-right mt-1 pr-2 small",4,"ngIf"],[1,"field-error","text-right","mt-1","pr-2","small"],[1,"field-error","text-right","mt-1","pr-2","small","offset-7"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h5",3),d._uU(4,"Add Folder "),d.qZA(),d.TgZ(5,"button",4),d.NdJ("click",function(){return t.close()}),d._uU(6,"\xd7"),d.qZA(),d.qZA(),d.TgZ(7,"div",5),d.TgZ(8,"form",6),d.NdJ("keyup.enter",function(){return!t.newFolderDef.invalid}),d.TgZ(9,"div",5),d.TgZ(10,"div",7),d.TgZ(11,"div",8),d.TgZ(12,"label",9),d._uU(13,"Name"),d.qZA(),d.qZA(),d.TgZ(14,"div",10),d._UZ(15,"input",11),d.YNc(16,C,3,2,"ng-container",12),d.qZA(),d.qZA(),d.TgZ(17,"div",7),d.TgZ(18,"div",8),d.TgZ(19,"label",13),d._uU(20,"Description"),d.qZA(),d.qZA(),d.TgZ(21,"div",10),d._UZ(22,"input",14),d.YNc(23,M,2,1,"ng-container",12),d.qZA(),d.qZA(),d.TgZ(24,"div",7),d.TgZ(25,"div",8),d.TgZ(26,"label",15),d.NdJ("click",function(){return t.openAddNewFolderModal()}),d._uU(27,"Folder"),d.qZA(),d.qZA(),d.TgZ(28,"div",10),d.TgZ(29,"app-t-select",16),d.NdJ("selectFolderEvent",function(e){return t.selectFolderEventHandler(e)})("selectFolderLevel",function(e){return t.selectFolderLevelHandler(e)}),d.qZA(),d.qZA(),d._UZ(30,"div",17),d.YNc(31,P,2,0,"div",18),d.qZA(),d.TgZ(32,"div",7),d.TgZ(33,"div",8),d.TgZ(34,"label",19),d._uU(35,"Active"),d.qZA(),d.qZA(),d.TgZ(36,"div",10),d.TgZ(37,"div",20),d._UZ(38,"input",21),d._UZ(39,"label",22),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(40,"div",23),d.TgZ(41,"button",24),d._uU(42,"Cancel"),d.qZA(),d.TgZ(43,"button",25),d.NdJ("click",function(){return t.save()}),d._uU(44,"Save"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(8),d.Q6J("formGroup",t.newFolderDef),d.xp6(8),d.Q6J("ngIf",t.f.name.invalid&&(t.f.name.dirty||t.f.name.touched)),d.xp6(7),d.Q6J("ngIf",t.f.desc.invalid&&(t.f.desc.dirty||t.f.desc.touched)),d.xp6(6),d.Q6J("data",t.folderList)("currentFormId",null),d.xp6(2),d.Q6J("ngIf",t.selectedLevel>3),d.xp6(12),d.Q6J("disabled",t.f.name.invalid||t.f.desc.invalid||t.selectedLevel>3))},directives:[x._Y,x.JL,x.sg,x.Fj,x.JJ,x.u,i.O5,N,x.Wl],styles:[""]}),e})();function O(e,t){1&e&&(d.TgZ(0,"div",28),d._uU(1,"Name is required "),d.qZA())}function L(e,t){if(1&e&&(d.ynx(0),d.YNc(1,O,2,0,"div",27),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",(null==e.f.name.errors?null:e.f.name.errors.required)||(null==e.f.name.errors?null:e.f.name.errors.pattern))}}function D(e,t){1&e&&(d.TgZ(0,"div",28),d._uU(1,"Description is required "),d.qZA())}function Q(e,t){if(1&e&&(d.ynx(0),d.YNc(1,D,2,0,"div",27),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",(null==e.f.desc.errors?null:e.f.desc.errors.required)||(null==e.f.desc.errors?null:e.f.desc.errors.pattern))}}let Y=(()=>{class e{constructor(e,t,o){this.http=e,this.activeModal=t,this.modalService=o,this.addForm=new x.cw({name:new x.NI("",[x.kI.required]),desc:new x.NI("",[x.kI.required]),folder:new x.NI("",[x.kI.required,x.kI.minLength(10)]),active:new x.NI(!0)})}checkforAgreements({value:e}){return e?null:{isRefused:!0}}selectFolderEventHandler(e){var t;console.log(e),null===(t=this.folder)||void 0===t||t.setValue(e)}ngOnInit(){"Edit"===this.modalType&&this.addForm.setValue({name:this.config.name,desc:this.config.description,folder:this.config.folderID,active:this.config.isActive}),console.log(this.folderList,this.modalType)}closeModal(){this.activeModal.close("close")}editForm(){this.http.call("SaveFormAttributes","POST",{Description:this.addForm.value.desc,DocumentTemplatesJson:"NO_VALUE",FormSettings:"NO_VALUE",FormType:this.type,Id:this.config.id,IsActive:this.addForm.value.isActive,Name:this.addForm.value.name,SessionUser:this.userId,SubmissionButtonName:"NO_USAGE",SubmissionSettings:"NO_USAGE",WorkSpaceId:this.workSpaceId}).subscribe(e=>{e.id&&this.activeModal.close({message:"added",res:e}),console.log(e)})}submit(){this.http.call("SaveFormAttributes","POST",{Description:this.addForm.value.desc,DocumentTemplatesJson:"NOUSAGE",FormSettings:"NOUSAGE",FormType:this.type,FolderID:this.addForm.value.folder,IsActive:!0,Name:this.addForm.value.name,SessionUser:this.userId,SubmissionButtonName:"NOUSAGE",SubmissionSettings:"NOUSAGE",WorkSpaceId:this.workSpaceId}).subscribe(e=>{e.id&&this.activeModal.close({message:"added",res:e}),console.log(e)})}openAddNewFolderModal(){console.log("open");const e=this.modalService.open(E,{size:"lg"});e.componentInstance.folderList=this.folderList,e.componentInstance.workSpaceId=this.workSpaceId,e.componentInstance.userId=this.userId,e.result.then(e=>{"close"!==e&&this.http.call("getFolders","POST",{WorkSpaceId:this.workSpaceId}).subscribe(e=>{this.folderList=e})},e=>{console.log("Dismissed ")})}get name(){return this.addForm.get("name")}get desc(){return this.addForm.get("desc")}get folder(){return this.addForm.get("folder")}get active(){return this.addForm.get("active")}get f(){return this.addForm.controls}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.O),d.Y36(c.Kz),d.Y36(c.FF))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-edit-form-modal"]],inputs:{folderList:"folderList",type:"type",modalType:"modalType",workSpaceId:"workSpaceId",userId:"userId",config:"config"},decls:46,vars:7,consts:[["tabindex","-1","id","edit-form-modal",1,""],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","keyup.enter"],[1,"modal-body"],[1,"row","my-4","px-4","form-group"],[1,"col-md-3"],["for","form-name"],[1,"col-md-7"],["type","text","formControlName","name","placeholder","Name",1,"form-control"],[4,"ngIf"],["for","form-desc"],["type","text","formControlName","desc","placeholder","Description",1,"form-control"],["for","form-folder"],[3,"data","currentFormId","selectFolderEvent"],[1,"col-md-2","p-2"],["role","button",1,"material-icons-round",3,"click"],["for","form-status"],[1,"custom-control","custom-switch"],["type","checkbox","id","bf_active_form","formControlName","active",1,"custom-control-input"],["for","bf_active_form",1,"custom-control-label"],[1,"modal-footer","border-0"],["type","button",1,"btn","btn-link","btn-sm","text-bf",3,"click"],["type","button",1,"btn","btn-bf","btn-sm",3,"disabled","click"],["class","field-error text-right mt-1 pr-2 small",4,"ngIf"],[1,"field-error","text-right","mt-1","pr-2","small"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h5",3),d._uU(4),d.qZA(),d.TgZ(5,"button",4),d.NdJ("click",function(){return t.closeModal()}),d.TgZ(6,"span",5),d._uU(7,"\xd7"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"form",6),d.NdJ("keyup.enter",function(){return!t.addForm.invalid}),d.TgZ(9,"div",7),d.TgZ(10,"div",8),d.TgZ(11,"div",9),d.TgZ(12,"label",10),d._uU(13,"Name"),d.qZA(),d.qZA(),d.TgZ(14,"div",11),d._UZ(15,"input",12),d.YNc(16,L,2,1,"ng-container",13),d.qZA(),d.qZA(),d.TgZ(17,"div",8),d.TgZ(18,"div",9),d.TgZ(19,"label",14),d._uU(20,"Description"),d.qZA(),d.qZA(),d.TgZ(21,"div",11),d._UZ(22,"input",15),d.YNc(23,Q,2,1,"ng-container",13),d.qZA(),d.qZA(),d.TgZ(24,"div",8),d.TgZ(25,"div",9),d.TgZ(26,"label",16),d._uU(27,"Folder"),d.qZA(),d.qZA(),d.TgZ(28,"div",11),d.TgZ(29,"app-t-select",17),d.NdJ("selectFolderEvent",function(e){return t.selectFolderEventHandler(e)}),d.qZA(),d.qZA(),d.TgZ(30,"div",18),d.TgZ(31,"i",19),d.NdJ("click",function(){return t.openAddNewFolderModal()}),d._uU(32,"create_new_folder"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"div",8),d.TgZ(34,"div",9),d.TgZ(35,"label",20),d._uU(36,"Active"),d.qZA(),d.qZA(),d.TgZ(37,"div",11),d.TgZ(38,"div",21),d._UZ(39,"input",22),d._UZ(40,"label",23),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(41,"div",24),d.TgZ(42,"button",25),d.NdJ("click",function(){return t.closeModal()}),d._uU(43,"Cancel"),d.qZA(),d.TgZ(44,"button",26),d.NdJ("click",function(){return"Edit"===t.modalType?t.editForm():t.submit()}),d._uU(45,"Save"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.hij("",t.modalType," Form"),d.xp6(4),d.Q6J("formGroup",t.addForm),d.xp6(8),d.Q6J("ngIf",t.f.name.invalid&&(t.f.name.dirty||t.f.name.touched)),d.xp6(7),d.Q6J("ngIf",t.f.desc.invalid&&(t.f.desc.dirty||t.f.desc.touched)),d.xp6(6),d.Q6J("data",t.folderList)("currentFormId",null==t.config?null:t.config.folderID),d.xp6(15),d.Q6J("disabled",t.f.name.invalid||t.f.desc.invalid))},directives:[x._Y,x.JL,x.sg,x.Fj,x.JJ,x.u,i.O5,N,x.Wl],styles:[""]}),e})(),H=(()=>{class e{constructor(e){this.activeModal=e}ngOnInit(){}close(e){this.activeModal.close(e)}closeModal(){this.activeModal.close("close")}archive(){this.activeModal.close("archive")}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(c.Kz))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-confirm-modal"]],inputs:{message:"message",modalName:"modalName"},decls:17,vars:3,consts:[["tabindex","-1","id","add-form-workflow-modal",1,""],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"justify-content-center","align-content-center"],[3,"innerHTML"],[1,"modal-footer","border-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-link","btn-sm","text-bf",3,"click"],["type","button",1,"btn","btn-bf","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h5",3),d._uU(4),d.qZA(),d.TgZ(5,"button",4),d.NdJ("click",function(){return t.close("close")}),d.TgZ(6,"span",5),d._uU(7,"\xd7"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"div",6),d.ynx(9),d.TgZ(10,"div",7),d._UZ(11,"div",8),d.qZA(),d.BQk(),d.qZA(),d.TgZ(12,"div",9),d.TgZ(13,"button",10),d.NdJ("click",function(){return t.close("close")}),d._uU(14,"close"),d.qZA(),d.TgZ(15,"button",11),d.NdJ("click",function(){return t.archive()}),d._uU(16),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.Oqu(t.modalName),d.xp6(7),d.Q6J("innerHTML",t.message,d.oJD),d.xp6(5),d.Oqu(t.modalName))},styles:[""]}),e})();function B(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",2),d.TgZ(1,"div",3),d.TgZ(2,"div",4),d.TgZ(3,"h5",5),d.NdJ("click",function(){return d.CHM(e),d.oxw().close("close")}),d._uU(4,"Restrict Form Entries"),d.qZA(),d.TgZ(5,"button",6),d.NdJ("click",function(){return d.CHM(e),d.oxw().close("close")}),d._uU(6,"\xd7"),d.qZA(),d.qZA(),d.TgZ(7,"div",7),d.TgZ(8,"div",8),d.TgZ(9,"div",9),d.TgZ(10,"button",10),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.addForm=!t.addForm}),d._uU(11," Add User "),d.qZA(),d.qZA(),d.TgZ(12,"div",11),d.TgZ(13,"table",12),d.TgZ(14,"thead",13),d.TgZ(15,"tr"),d.TgZ(16,"th",14),d._uU(17," User "),d.qZA(),d.TgZ(18,"th"),d._uU(19," View "),d.qZA(),d.TgZ(20,"th"),d._uU(21," Edit "),d.qZA(),d.TgZ(22,"th"),d._uU(23," Delete "),d.qZA(),d.TgZ(24,"th"),d._uU(25," Actions "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(26,"tbody"),d.TgZ(27,"tr"),d.TgZ(28,"td",14),d._uU(29,"john@doe.com"),d.qZA(),d.TgZ(30,"td"),d._UZ(31,"input",15),d._UZ(32,"label",16),d.qZA(),d.TgZ(33,"td"),d._UZ(34,"input",17),d._UZ(35,"label",18),d.qZA(),d.TgZ(36,"td"),d._UZ(37,"input",19),d._UZ(38,"label",20),d.qZA(),d.TgZ(39,"td"),d.TgZ(40,"i",21),d._uU(41,"edit"),d.qZA(),d.TgZ(42,"i",22),d._uU(43,"delete"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(44,"tr"),d.TgZ(45,"td",14),d._uU(46,"jane@doe.com"),d.qZA(),d.TgZ(47,"td"),d._UZ(48,"input",23),d._UZ(49,"label",24),d.qZA(),d.TgZ(50,"td"),d._UZ(51,"input",25),d._UZ(52,"label",26),d.qZA(),d.TgZ(53,"td"),d._UZ(54,"input",27),d._UZ(55,"label",28),d.qZA(),d.TgZ(56,"td"),d.TgZ(57,"i",21),d._uU(58,"edit"),d.qZA(),d.TgZ(59,"i",22),d._uU(60,"delete"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(61,"tr"),d.TgZ(62,"td",14),d._uU(63,"jane@doe.com"),d.qZA(),d.TgZ(64,"td"),d._UZ(65,"input",29),d._UZ(66,"label",30),d.qZA(),d.TgZ(67,"td"),d._UZ(68,"input",31),d._UZ(69,"label",32),d.qZA(),d.TgZ(70,"td"),d._UZ(71,"input",33),d._UZ(72,"label",34),d.qZA(),d.TgZ(73,"td"),d.TgZ(74,"i",21),d._uU(75,"edit"),d.qZA(),d.TgZ(76,"i",22),d._uU(77,"delete"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}}function W(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"div",3),d.TgZ(2,"div",4),d.TgZ(3,"h5",36),d._uU(4,"User Provide Form Permission's"),d.qZA(),d.TgZ(5,"button",37),d._uU(6,"\xd7"),d.qZA(),d.qZA(),d.TgZ(7,"div",7),d.TgZ(8,"div",38),d.TgZ(9,"div",39),d.TgZ(10,"label",40),d._uU(11,"User Name"),d.qZA(),d.qZA(),d.TgZ(12,"div",41),d._UZ(13,"input",42),d.qZA(),d.qZA(),d.TgZ(14,"div",38),d.TgZ(15,"div",39),d.TgZ(16,"label",40),d._uU(17,"Permissions"),d.qZA(),d.qZA(),d.TgZ(18,"div",41),d.TgZ(19,"div",43),d.TgZ(20,"div",44),d.TgZ(21,"label",45),d._uU(22,"Vew"),d.qZA(),d._UZ(23,"input",46),d._UZ(24,"label",45),d.qZA(),d.TgZ(25,"div",44),d.TgZ(26,"label",47),d._uU(27,"Edit"),d.qZA(),d._UZ(28,"input",48),d._UZ(29,"label",47),d.qZA(),d.TgZ(30,"div",44),d._UZ(31,"input",49),d.TgZ(32,"label",50),d._uU(33,"Delete"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(34,"div",51),d.TgZ(35,"button",52),d.NdJ("click",function(){return d.CHM(e),d.oxw().close("close")}),d._uU(36,"close"),d.qZA(),d.TgZ(37,"button",53),d.NdJ("click",function(){return d.CHM(e),d.oxw().save()}),d._uU(38,"Save"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}}let $=(()=>{class e{constructor(e,t){this.http=e,this.activeModal=t,this.addForm=!1}ngOnInit(){var e;this.http.call("getRolePermissions","POST",{FormIds:null===(e=this.form)||void 0===e?void 0:e.value}).subscribe(e=>{console.log(e)})}close(e){console.log("12"),this.activeModal.close(e)}save(){}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.O),d.Y36(c.Kz))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-restrict-form-entries"]],inputs:{form:"form"},decls:2,vars:2,consts:[["class","","tabindex","-1","id","form-permissions-modal",4,"ngIf"],["class","","tabindex","-1","id","user-provide-form-permissions-modal",4,"ngIf"],["tabindex","-1","id","form-permissions-modal",1,""],[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"click"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],[1,"row","p-3"],[1,"col-md-12","text-right","mt-4","mb-3"],["type","button","data-dismiss","modal","data-toggle","modal","data-target","#user-provide-form-permissions-modal",1,"btn","btn-bf","btn-sm",3,"click"],[1,"col-md-12"],[1,"table","table-borderless","text-center","border"],[1,"thead-light"],[1,"text-left"],["type","checkbox","id","user-form-view"],["for","user-form-view"],["type","checkbox","id","user-form-edit"],["for","user-form-edit"],["type","checkbox","id","user-form-delete","checked",""],["for","user-form-delete"],[1,"material-icons","text-dark","mr-2"],[1,"material-icons","text-dark"],["type","checkbox","id","user-2-form-view"],["for","user-2-form-view"],["type","checkbox","id","user-2-form-edit"],["for","user-2-form-edit"],["type","checkbox","id","user-2-form-delete","checked",""],["for","user-2-form-delete"],["type","checkbox","id","user-3-form-view"],["for","user-3-form-view"],["type","checkbox","id","user-3-form-edit"],["for","user-3-form-edit"],["type","checkbox","id","user-3-form-delete","checked",""],["for","user-3-form-delete"],["tabindex","-1","id","user-provide-form-permissions-modal",1,""],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"row","my-4","px-4","form-group"],[1,"col-md-3"],["for","form-name"],[1,"col-md-7"],["type","text","id","user-name",1,"form-control"],[1,"permissions-container","d-flex"],[1,"d-flex","align-items-center","mr-5"],["for","user-permission-view"],["type","checkbox","id","user-permission-view"],["for","user-permission-edit"],["type","checkbox","id","user-permission-edit"],["type","checkbox","id","user-permission-delete"],["for","user-permission-delete"],[1,"modal-footer","border-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-link","btn-sm","text-bf",3,"click"],["type","button",1,"btn","btn-bf","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.YNc(0,B,78,0,"div",0),d.YNc(1,W,39,0,"div",1)),2&e&&(d.Q6J("ngIf",!t.addForm),d.xp6(1),d.Q6J("ngIf",t.addForm))},directives:[i.O5],styles:[""]}),e})(),j=(()=>{class e{constructor(e,t){this.http=e,this.activeModal=t}ngOnInit(){}selectFolderEventHandler(e){this.id=e}save(){let e={};e=this.form.bulk?{Action:"Move",FolderId:this.id,FormIds:this.form.value}:{FolderID:this.id,Id:this.form.value},this.http.call(this.form.bulk?"bulkAction":"moveFolder","POST",e).subscribe(e=>{console.log(e),this.close()})}close(){this.activeModal.close("close")}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.O),d.Y36(c.Kz))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-move-modal"]],inputs:{folderList:"folderList",form:"form"},decls:19,vars:2,consts:[["tabindex","-1","id","MoveFormModal"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],[1,"row","my-4","px-4","form-group"],[1,"col-md-3"],["for","form-name"],[1,"col-md-7"],[3,"data","currentFormId","selectFolderEvent"],[1,"modal-footer","border-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-link","btn-sm","text-bf",3,"click"],["type","button",1,"btn","btn-bf","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h5",3),d._uU(4,"Move "),d.qZA(),d.TgZ(5,"button",4),d.NdJ("click",function(){return t.close()}),d._uU(6,"\xd7"),d.qZA(),d.qZA(),d.TgZ(7,"div",5),d.TgZ(8,"div",6),d.TgZ(9,"div",7),d.TgZ(10,"label",8),d._uU(11,"New Folder"),d.qZA(),d.qZA(),d.TgZ(12,"div",9),d.TgZ(13,"app-t-select",10),d.NdJ("selectFolderEvent",function(e){return t.selectFolderEventHandler(e)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",11),d.TgZ(15,"button",12),d.NdJ("click",function(){return t.close()}),d._uU(16,"Cancel"),d.qZA(),d.TgZ(17,"button",13),d.NdJ("click",function(){return t.save()}),d._uU(18,"Save"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(13),d.Q6J("data",t.folderList)("currentFormId",null==t.form?null:t.form.folderId))},directives:[N],styles:[""]}),e})();var z=o(8634);function V(e,t){1&e&&d._UZ(0,"option",18),2&e&&d.Q6J("value",t.$implicit.name)}function K(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",19),d.TgZ(1,"input",20),d.NdJ("change",function(t){return d.CHM(e),d.oxw().onCheckboxChange(t)}),d.qZA(),d.TgZ(2,"label",21),d._uU(3),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(1),d.s9C("value",e.value),d.MGl("id","user-permission-",e.short,""),d.Q6J("checked",3==e.value)("disabled",3==e.value),d.xp6(1),d.MGl("for","user-permission-",e.short,""),d.xp6(1),d.Oqu(e.name)}}let G=(()=>{class e{constructor(e,t,o,i,n){this.http=e,this.fb=t,this.modalService=o,this.activeModal=i,this.toastService=n,this.userPermissions=[{name:"View",value:3,short:"view"},{name:"Edit",value:1,short:"edit"},{name:"Delete",value:2,short:"delete"}],this.addPermissionForm=this.fb.group({email:["",x.kI.required],permission:this.fb.array([])})}ngOnInit(){this.http.call("getFormUserRoleWorkSpaces","POST",{Id:this.formId,WorkSpaceId:this.workSpaceId}).subscribe(e=>{this.userRolesData=e;let t=[];e.data.forEach(function(e,o){0!=o&&t.push({id:o+1,name:`${e.firstName} ${e.lastName} (${e.email})`})}),this.userListData=t})}onCheckboxChange(e){const t=this.addPermissionForm.get("permission");if(e.target.checked)t.push(new x.NI(e.target.value));else{let o=0;t.controls.forEach(i=>{i.value!=e.target.value?o++:t.removeAt(o)})}}submit(){let e=this.addPermissionForm.value.email.split("(");e=e[1].replace(")","");const t=e,o=this.addPermissionForm.value.permission;let i;this.userRolesData.data.forEach(e=>{e.email!==t||(i=e.id)}),o.push(3),o.sort();let n={FormId:this.formId,Id:null,Permissions:o.toString(),UserEmail:t,UserId:i,UserName:null};this.http.call("saveRolePermission","POST",n).subscribe(e=>{this.toastService.showSuccess("User Added Successfully!"),this.closeAddModal()})}closeAddModal(){this.activeModal.close(!0);const e=this.modalService.open(le,{size:"lg"});e.componentInstance.formId=this.formId,e.componentInstance.modalType="permission",e.componentInstance.workSpaceId=this.workSpaceId,e.result.then(e=>{},e=>{console.log("Dismissed ")})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.O),d.Y36(x.qu),d.Y36(c.FF),d.Y36(c.Kz),d.Y36(z.k))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-add-user-permission-modal"]],inputs:{formId:"formId",modalType:"modalType",workSpaceId:"workSpaceId"},decls:27,vars:4,consts:[[1,"modal-content"],[3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","title","Close",1,"close",3,"click"],[1,"modal-body"],[1,"row","my-4","px-4","form-group"],[1,"col-md-3"],["for","form-name"],[1,"col-md-7"],["list","emails","name","email","id","email","formControlName","email","autocomplete","off",1,"form-control"],["id","emails"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-7","permissions-container"],["class","custom-control custom-checkbox custom-control-inline",4,"ngFor","ngForOf"],[1,"modal-footer","border-0"],["type","button","data-bs-dismiss","modal","title","Cancel",1,"btn","btn-link","btn-sm","text-bf",3,"click"],["type","button","title","Save",1,"btn","btn-bf","btn-sm",3,"disabled","click"],[3,"value"],[1,"custom-control","custom-checkbox","custom-control-inline"],["name","checkbox","type","checkbox",1,"custom-control-input",3,"value","id","checked","disabled","change"],[1,"custom-control-label",3,"for"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"h5",3),d._uU(4,"User Provide Form Permission's"),d.qZA(),d.TgZ(5,"button",4),d.NdJ("click",function(){return t.closeAddModal()}),d._uU(6,"\xd7"),d.qZA(),d.qZA(),d.TgZ(7,"div",5),d.TgZ(8,"div",6),d.TgZ(9,"div",7),d.TgZ(10,"label",8),d._uU(11,"User Name"),d.qZA(),d.qZA(),d.TgZ(12,"div",9),d._UZ(13,"input",10),d.TgZ(14,"datalist",11),d.YNc(15,V,1,1,"option",12),d.qZA(),d.qZA(),d.qZA(),d.TgZ(16,"div",6),d.TgZ(17,"div",7),d.TgZ(18,"label",8),d._uU(19,"Permissions"),d.qZA(),d.qZA(),d.TgZ(20,"div",13),d.YNc(21,K,4,6,"div",14),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"div",15),d.TgZ(23,"button",16),d.NdJ("click",function(){return t.closeAddModal()}),d._uU(24,"Cancel"),d.qZA(),d.TgZ(25,"button",17),d.NdJ("click",function(){return t.submit()}),d._uU(26,"Save"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(1),d.Q6J("formGroup",t.addPermissionForm),d.xp6(14),d.Q6J("ngForOf",t.userListData),d.xp6(6),d.Q6J("ngForOf",t.userPermissions),d.xp6(4),d.Q6J("disabled",t.addPermissionForm.invalid))},directives:[x._Y,x.JL,x.sg,x.Fj,x.JJ,x.u,i.sg,x.YN,x.Kr],styles:[""]}),e})();function R(e,t){1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td",13),d._uU(2,"No user data found"),d.qZA(),d.qZA())}function X(e,t){if(1&e&&(d.TgZ(0,"td",11),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.Oqu(e.userEmail)}}function ee(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"td"),d.TgZ(1,"input",16),d.NdJ("change",function(t){d.CHM(e);const o=d.oxw(2).$implicit;return d.oxw(2).onCheckboxChange(t,o)}),d.qZA(),d._UZ(2,"label",17),d.qZA()}if(2&e){const e=t.$implicit,o=d.oxw(2).$implicit,i=d.oxw(2);d.xp6(1),d.MGl("id","user-form-",e.short,""),d.s9C("value",e.value),d.Q6J("checked",o.permissions.indexOf(e.value)>-1||null)("disabled",!i.isEditMode||i.isEditMode!=o.id||3==e.value),d.xp6(1),d.MGl("for","user-form-",e.short,"")}}function te(e,t){if(1&e&&(d.ynx(0),d.YNc(1,ee,3,5,"td",14),d.BQk()),2&e){const e=d.oxw(3);d.xp6(1),d.Q6J("ngForOf",e.userPermissions)}}function oe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",19),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(2).editFormUser(t)}),d.TgZ(1,"i",21),d._uU(2,"edit"),d.qZA(),d.qZA()}}function ie(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",19),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(2).updateFormUser(t)}),d.TgZ(1,"i",22),d._uU(2,"update"),d.qZA(),d.qZA()}}function ne(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"td"),d.YNc(1,oe,3,0,"span",18),d.YNc(2,ie,3,0,"span",18),d.TgZ(3,"span",19),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).deleteFormUser(t)}),d.TgZ(4,"i",20),d._uU(5,"delete"),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",t.isEditMode!=e.id),d.xp6(1),d.Q6J("ngIf",t.isEditMode&&t.isEditMode==e.id)}}function re(e,t){if(1&e&&(d.TgZ(0,"tr"),d.YNc(1,X,2,1,"td",15),d.YNc(2,te,2,1,"ng-container",12),d.YNc(3,ne,6,2,"td",12),d.qZA()),2&e){const e=t.$implicit;d.xp6(1),d.Q6J("ngIf",e),d.xp6(1),d.Q6J("ngIf",e),d.xp6(1),d.Q6J("ngIf",e)}}function se(e,t){if(1&e&&(d.ynx(0),d.YNc(1,re,4,3,"tr",14),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngForOf",e.userLists)}}let le=(()=>{class e{constructor(e,t,o,i){this.http=e,this.modalService=t,this.activeModal=o,this.toastService=i,this.assignedUserPermission=[],this.assignedPer=[],this.userPermissions=[{name:"View",value:3,short:"view"},{name:"Edit",value:1,short:"edit"},{name:"Delete",value:2,short:"delete"}]}ngOnInit(){setTimeout(()=>{this.http.call("getRolePermission","POST",{FormId:this.formId}).subscribe(e=>{e&&e.length>0&&(this.userLists=e,e.forEach(e=>{this.assignedUserPermission.push({id:e.id,permissions:e.permissions})}))})},1e3)}openAddUserPermissionModal(){this.activeModal.close(!0);const e=this.modalService.open(G,{size:"lg"});e.componentInstance.modalType="add_permission",e.componentInstance.formId=this.formId,e.componentInstance.workSpaceId=this.workSpaceId,e.result.then(e=>{},e=>{console.log("Dismissed ")})}deleteFormUser(e){confirm("Are you sure you want to delete the user?")&&this.http.call("deleteRolePermission","POST",{FormId:e.formId,Id:e.id,Permissions:e.permissions,UserId:e.userId}).subscribe(t=>{this.userLists.forEach((t,o)=>{t.id===e.id&&(delete this.userLists[o],this.toastService.showSuccess("User Deleted Successfully!"))})})}editFormUser(e){this.isEditMode=e.id}updateFormUser(e){let t="";this.assignedUserPermission.forEach(o=>{o.id==e.id&&(t=o.permissions)});let o=t.split(",");o.sort();const i={FormId:e.formId,Id:e.id,Permissions:o.join(","),UserId:e.userId,UserEmail:e.userEmail,UserName:e.userName};this.http.call("saveRolePermission","POST",i).subscribe(e=>{this.userLists.forEach((t,o)=>{if(t.id===e.id){this.userLists[o]=e;let t=e.formId;this.userLists[o].formId=e.userId,this.userLists[o].userId=t,console.log(this.userLists),this.isEditMode="",this.toastService.showSuccess("Permission Updated Successfully!")}})})}onCheckboxChange(e,t){if(this.assignedPer=[],this.assignedUserPermission.forEach((e,o)=>{if(e.id==t.id){this.assignedidx=o;let t=e.permissions.split(",");this.assignedPer=t}}),e.target.checked)this.assignedPer.push(e.target.value);else{let t=0;this.assignedPer.forEach(o=>{o!=e.target.value?t++:this.assignedPer.splice(t,1)})}this.assignedPer=this.assignedPer.filter(function(e){return e}),this.assignedUserPermission[this.assignedidx].permissions=this.assignedPer.join(",")}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.O),d.Y36(c.FF),d.Y36(c.Kz),d.Y36(z.k))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-user-permission-modal"]],inputs:{formId:"formId",modalType:"modalType",workSpaceId:"workSpaceId"},decls:28,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","title","Close",1,"close",3,"click"],[1,"modal-body"],[1,"row","p-3"],[1,"col-md-12","text-right","mt-4","mb-3"],["type","button","data-dismiss","modal","data-toggle","modal","data-target","#user-provide-form-permissions-modal","title","Add User",1,"btn","btn-bf","btn-sm",3,"click"],[1,"col-md-12"],[1,"table","table-borderless","text-center","border"],[1,"thead-light"],[1,"text-left"],[4,"ngIf"],["colspan","5"],[4,"ngFor","ngForOf"],["class","text-left",4,"ngIf"],["type","checkbox",3,"id","checked","disabled","value","change"],[3,"for"],[3,"click",4,"ngIf"],[3,"click"],["title","Delete",1,"material-icons","text-dark"],["title","Edit",1,"material-icons","text-dark","mr-2"],["title","Update",1,"material-icons","text-dark","mr-2"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h5",2),d._uU(3,"Restrict Form Entries"),d.qZA(),d.TgZ(4,"button",3),d.NdJ("click",function(){return t.activeModal.close("close")}),d._uU(5,"\xd7"),d.qZA(),d.qZA(),d.TgZ(6,"div",4),d.TgZ(7,"div",5),d.TgZ(8,"div",6),d.TgZ(9,"button",7),d.NdJ("click",function(){return t.openAddUserPermissionModal()}),d._uU(10," Add User "),d.qZA(),d.qZA(),d.TgZ(11,"div",8),d.TgZ(12,"table",9),d.TgZ(13,"thead",10),d.TgZ(14,"tr"),d.TgZ(15,"th",11),d._uU(16,"User"),d.qZA(),d.TgZ(17,"th"),d._uU(18,"View"),d.qZA(),d.TgZ(19,"th"),d._uU(20,"Edit"),d.qZA(),d.TgZ(21,"th"),d._uU(22,"Delete"),d.qZA(),d.TgZ(23,"th"),d._uU(24,"Actions"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(25,"tbody"),d.YNc(26,R,3,0,"tr",12),d.YNc(27,se,2,1,"ng-container",12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(26),d.Q6J("ngIf",!t.userLists),d.xp6(1),d.Q6J("ngIf",t.userLists))},directives:[i.O5,i.sg],styles:[""]}),e})();var de=o(25803),ce=o(23065),ae=o(834);const ue=function(e){return{"d-none":e}},me=function(e){return{"text-bf":e}},pe=function(e){return{"font-weight-bold":e}};function fe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",4),d.TgZ(1,"mat-icon",5),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.data.expanded=!(null!=t.data&&t.data.expanded)}),d._uU(2),d.qZA(),d.TgZ(3,"span",6),d._uU(4,"folder"),d.qZA(),d.TgZ(5,"span",7),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.selectionChange(t.data.value)}),d._uU(6),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("ngClass",d.VKq(5,ue,(null==e.searchedString?null:e.searchedString.length)>0&&!(null!=e.data&&null!=e.data.fullFolderPath&&e.data.fullFolderPath.includes(null==e.searchedString?null:e.searchedString.toLowerCase())))),d.xp6(2),d.hij(" ",e.data.expanded?"arrow_drop_down":"arrow_right"," "),d.xp6(1),d.Q6J("ngClass",d.VKq(7,me,e.selectedFolder===e.data.value)),d.xp6(2),d.Q6J("ngClass",d.VKq(9,pe,e.selectedFolder===e.data.value)),d.xp6(1),d.Oqu(e.data.text)}}function ge(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"app-tree-select",9),d.NdJ("selectFolderEvent",function(t){return d.CHM(e),d.oxw(2).selectionChange(t)}),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,o=d.oxw(2);d.xp6(1),d.Q6J("data",e)("selectedFolder",o.selectedFolder)("searchedString",o.searchedString)}}function he(e,t){if(1&e&&(d.ynx(0),d.YNc(1,ge,2,3,"ng-container",8),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngForOf",null==e.data?null:e.data.children)}}function Ze(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",10),d.TgZ(1,"span",11),d._uU(2,"arrow_right"),d.qZA(),d.TgZ(3,"span",6),d._uU(4,"folder"),d.qZA(),d.TgZ(5,"span",7),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.selectionChange(t.data.value)}),d._uU(6),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("ngClass",d.VKq(4,ue,(null==e.searchedString?null:e.searchedString.length)>0&&!(null!=e.data&&null!=e.data.fullFolderPath&&e.data.fullFolderPath.includes(null==e.searchedString?null:e.searchedString.toLowerCase())))),d.xp6(3),d.Q6J("ngClass",d.VKq(6,me,e.selectedFolder===e.data.value)),d.xp6(2),d.Q6J("ngClass",d.VKq(8,pe,e.selectedFolder===e.data.value)),d.xp6(1),d.Oqu(e.data.text)}}let ve=(()=>{class e{constructor(){this.selectFolderEvent=new d.vpe}ngOnInit(){console.log("tree select ",this.data)}selectionChange(e){this.selectFolderEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-tree-select"]],inputs:{data:"data",selectedFolder:"selectedFolder",searchedString:"searchedString"},outputs:{selectFolderEvent:"selectFolderEvent"},decls:4,vars:6,consts:[["class","filter-dropdown-folder-item small mb-1 d-flex",3,"ngClass",4,"ngIf"],[1,"ml-3",3,"ngClass"],[4,"ngIf"],["class","filter-dropdown-folder-item small d-flex align-items-center mb-1",3,"ngClass",4,"ngIf"],[1,"filter-dropdown-folder-item","small","mb-1","d-flex",3,"ngClass"],["role","button",1,"mat-icon-rtl-mirror","material-icons-round",3,"click"],[1,"material-icons-outlined","align-bottom","mr-1",3,"ngClass"],[1,"filter-dropdown-folder-name",3,"ngClass","click"],[4,"ngFor","ngForOf"],[3,"data","selectedFolder","searchedString","selectFolderEvent"],[1,"filter-dropdown-folder-item","small","d-flex","align-items-center","mb-1",3,"ngClass"],["role","button",1,"material-icons-round","align-bottom","mr-1",2,"opacity","0"]],template:function(e,t){1&e&&(d.YNc(0,fe,7,11,"div",0),d.TgZ(1,"div",1),d.YNc(2,he,2,1,"ng-container",2),d.qZA(),d.YNc(3,Ze,7,10,"div",3)),2&e&&(d.Q6J("ngIf",(null==t.data||null==t.data.children?null:t.data.children.length)>0),d.xp6(1),d.Q6J("ngClass",d.VKq(4,ue,(null==t.searchedString?null:t.searchedString.length)>0&&!(null!=t.data&&null!=t.data.fullFolderPath&&t.data.fullFolderPath.includes(null==t.searchedString?null:t.searchedString.toLowerCase())))),d.xp6(1),d.Q6J("ngIf",(null==t.searchedString?null:t.searchedString.length)>0||(null==t.data?null:t.data.expanded)),d.xp6(1),d.Q6J("ngIf",!(null!=t.data&&t.data.children)))},directives:[i.O5,i.mk,I.Hw,i.sg,e],styles:[".filter-dropdown-folder-list[_ngcontent-%COMP%]   .material-icons-outlined[_ngcontent-%COMP%], .filter-dropdown-folder-list[_ngcontent-%COMP%]   .material-icons-round[_ngcontent-%COMP%]{font-size:1rem}.filter-dropdown-folder-item[_ngcontent-%COMP%]   .mat-icon.material-icons-round[_ngcontent-%COMP%]{width:20px;height:20px;line-height:18px}.filter-dropdown-folder-item[_ngcontent-%COMP%]   .material-icons-outlined[_ngcontent-%COMP%]{font-size:1rem}.filter-dropdown-folder-item[_ngcontent-%COMP%]   .material-icons-round[_ngcontent-%COMP%]{width:20px;height:20px;line-height:24px}"]}),e})();function be(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"app-tree-select",8),d.NdJ("selectFolderEvent",function(t){return d.CHM(e),d.oxw().selectionChange(t)}),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,o=d.oxw();d.xp6(1),d.Q6J("data",e)("searchedString",o.searchedString)("selectedFolder",o.selectedFolder)}}let we=(()=>{class e{constructor(){this.selectFolderEvent=new d.vpe,this.selected="Root",this.searchedString=null}ngOnInit(){const e=[{text:"Root",main:!0,children:this.data}];null==e||e.forEach(e=>{var t;e.fullFolderPath="",this.selectedFolder===(null==e?void 0:e.value)&&(this.selected=e.text),e.fullFolderPath+="/"+(null===(t=null==e?void 0:e.text)||void 0===t?void 0:t.toLowerCase());const o=[];o.push(e),e.children&&this.ExtractChild(o,e.children)}),console.log(e),this.childData=e}ExtractChild(e,t){t.forEach(t=>{t.fullFolderPath="",t.fullFolderPath+="/"+t.text.toLowerCase(),e.forEach(e=>{e.fullFolderPath+="/"+t.text.toLowerCase()});const o=[];o.push(...e),o.push(t),this.selectedFolder===(null==t?void 0:t.value)&&(this.selected=t.text),t.children&&this.ExtractChild(o,t.children)})}selectionChange(e){this.selectFolderEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-filter-tree"]],inputs:{data:"data",selectedFolder:"selectedFolder"},outputs:{selectFolderEvent:"selectFolderEvent"},decls:9,vars:2,consts:[[1,"filter-dropdown-folders","border-bottom","py-2"],[1,"filter-dropdown-folder-search","px-3","py-2"],["type","search","placeholder","search folders",1,"form-control",3,"ngModel","ngModelChange"],[1,"filter-dropdown-folder-area","pl-4"],[1,"filter-dropdown-folder-area-title"],[1,"text-bf","font-weight-bold","small"],[1,"filter-dropdown-folder-list","overflow-auto","scroller","pt-2","pr-3"],[4,"ngFor","ngForOf"],[3,"data","searchedString","selectedFolder","selectFolderEvent"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"input",2),d.NdJ("ngModelChange",function(e){return t.searchedString=e}),d.qZA(),d.qZA(),d.TgZ(3,"div",3),d.TgZ(4,"div",4),d.TgZ(5,"span",5),d._uU(6,"Filter By Folders"),d.qZA(),d.qZA(),d.TgZ(7,"div",6),d.YNc(8,be,2,3,"ng-container",7),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(2),d.Q6J("ngModel",t.searchedString),d.xp6(6),d.Q6J("ngForOf",t.childData))},directives:[x.Fj,x.JJ,x.On,i.sg,ve],styles:[""]}),e})();function xe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"app-filter-tree",29),d.NdJ("selectFolderEvent",function(t){return d.CHM(e),d.oxw(4).selectionChange(t)}),d.qZA()}if(2&e){const e=d.oxw(4);d.Q6J("selectedFolder",e.selectedFolder)("data",e.folderList)}}function Ae(e,t){1&e&&(d.TgZ(0,"span",30),d._uU(1,"done"),d.qZA())}function Te(e,t){1&e&&(d.TgZ(0,"span",30),d._uU(1,"done"),d.qZA())}function Fe(e,t){1&e&&(d.TgZ(0,"span",30),d._uU(1,"done"),d.qZA())}const qe=function(e){return{"px-4 bg-light":e}};function Ie(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",21),d.TgZ(1,"div",22),d.TgZ(2,"div",23),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3);return t.selectedFolder=null,t.viewBy=null,t.viewFilterDropdown=!1,t.getFormsList(t.userInfo)}),d._uU(3," Clear Filter"),d.qZA(),d.TgZ(4,"div",24),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3);return t.openAddNewFolderModal(),t.viewFilterDropdown=!1}),d._uU(5,"Add New Folder"),d.qZA(),d.qZA(),d.YNc(6,xe,1,2,"app-filter-tree",25),d.TgZ(7,"div",26),d.TgZ(8,"div",27),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3);return t.changeViewBy("All Forms"),t.viewFilterDropdown=!1}),d.YNc(9,Ae,2,0,"span",28),d._uU(10," All Forms "),d.qZA(),d.TgZ(11,"div",27),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3);return t.changeViewBy("StarredForms"),t.viewFilterDropdown=!1}),d.YNc(12,Te,2,0,"span",28),d._uU(13," Starred "),d.qZA(),d.TgZ(14,"div",27),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3);return t.changeViewBy("ArchievedForms"),t.viewFilterDropdown=!1}),d.YNc(15,Fe,2,0,"span",28),d._uU(16," Archived "),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(3);d.xp6(6),d.Q6J("ngIf",e.folderList),d.xp6(2),d.Q6J("ngClass",d.VKq(7,qe,"All Forms"===e.viewBy)),d.xp6(1),d.Q6J("ngIf","All Forms"===e.viewBy),d.xp6(2),d.Q6J("ngClass",d.VKq(9,qe,"StarredForms"===e.viewBy)),d.xp6(1),d.Q6J("ngIf","StarredForms"===e.viewBy),d.xp6(2),d.Q6J("ngClass",d.VKq(11,qe,"ArchievedForms"===e.viewBy)),d.xp6(1),d.Q6J("ngIf","ArchievedForms"===e.viewBy)}}function ke(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",31),d.TgZ(1,"div",32),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3);return t.viewFilterDropdown=!t.viewFilterDropdown}),d.qZA(),d.qZA()}}const ye=function(e){return{disabled:e}};function _e(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",11),d.TgZ(1,"div",12),d.TgZ(2,"button",13),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).open()}),d._uU(3," Add Form "),d.qZA(),d.qZA(),d.TgZ(4,"div",14),d.TgZ(5,"i",15),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).bulkDelete()}),d._uU(6,"delete"),d.qZA(),d.TgZ(7,"i",16),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).bulkMove()}),d._uU(8,"archive"),d.qZA(),d.TgZ(9,"i",17),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).bulkArchive()}),d._uU(10,"drive_file_move"),d.qZA(),d.TgZ(11,"i",18),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2);return t.viewFilterDropdown=!t.viewFilterDropdown}),d._uU(12,"filter_alt"),d.qZA(),d.YNc(13,Ie,17,13,"div",19),d.qZA(),d.YNc(14,ke,2,0,"div",20),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(5),d.Q6J("ngClass",d.VKq(5,ye,0===(null==e.selectedForms?null:e.selectedForms.length))),d.xp6(2),d.Q6J("ngClass",d.VKq(7,ye,0===(null==e.selectedForms?null:e.selectedForms.length))),d.xp6(2),d.Q6J("ngClass",d.VKq(9,ye,0===(null==e.selectedForms?null:e.selectedForms.length))),d.xp6(4),d.Q6J("ngIf",e.viewFilterDropdown),d.xp6(1),d.Q6J("ngIf",e.viewFilterDropdown)}}function Ne(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"span",66),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3).$implicit,o=d.oxw(5);return o.openBuilderByName(t,o.formPermissions.canEdit?1:3)}),d._uU(2),d.qZA(),d.BQk()}if(2&e){const e=d.oxw(3).$implicit;d.xp6(2),d.Oqu(e.text?e.text:e.name)}}function Ue(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",66),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3).$implicit,o=d.oxw(5);return o.openbuilder(t,o.enableDefine(t,o.formsbyId)?0:3)}),d._uU(1),d.qZA()}if(2&e){const e=d.oxw(3).$implicit;d.xp6(1),d.Oqu(e.text?e.text:e.name)}}function Se(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",67),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3).$implicit;return d.oxw(5).openbuilder(t,0)}),d._uU(1,"Define"),d.qZA()}}function Ce(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",67),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3).$implicit;return d.oxw(5).openbuilder(t,1)}),d._uU(1,"Build"),d.qZA()}}function Je(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",68),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3).$implicit;return d.oxw(5).openbuilder(t,2)}),d._uU(1,"Publish"),d.qZA()}}function Me(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"i",69),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3).$implicit;return d.oxw(5).editForm(t)}),d._uU(1,"edit"),d.qZA()}}function Pe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"i",70),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(3).$implicit;return d.oxw(5).deleteForm(t)}),d._uU(1,"delete"),d.qZA()}}const Ee=function(e){return{"bg-bf-light":e}};function Oe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",44),d.TgZ(1,"div",45),d.TgZ(2,"label",46),d._UZ(3,"input",47),d.TgZ(4,"span",48),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(5).selectBulkForms(t)}),d.TgZ(5,"i",49),d._uU(6,"check_box_outline_blank"),d.qZA(),d.TgZ(7,"i",50),d._uU(8,"check_box"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"i",51),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(5).enableStarred(t)}),d._uU(10),d.qZA(),d.qZA(),d.TgZ(11,"div",52),d.YNc(12,Ne,3,1,"ng-container",6),d.YNc(13,Ue,2,1,"ng-template",null,53,d.W1O),d.qZA(),d.TgZ(15,"div",54),d.YNc(16,Se,2,0,"span",55),d.YNc(17,Ce,2,0,"span",55),d.YNc(18,Je,2,0,"span",56),d.TgZ(19,"span",57),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(5).openbuilder(t,3)}),d.TgZ(20,"span",58),d._uU(21,"Entries"),d.qZA(),d.qZA(),d.TgZ(22,"span",59),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(5).openFormURL(t)}),d._uU(23,"URL"),d.qZA(),d.qZA(),d.TgZ(24,"div",60),d.TgZ(25,"i",61),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(5).openModal(t.value)}),d._uU(26,"people"),d.qZA(),d.TgZ(27,"i",62),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(5).move(t)}),d._uU(28,"drive_file_move"),d.qZA(),d.TgZ(29,"i",63),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(5).archive(t)}),d._uU(30,"archive"),d.qZA(),d.YNc(31,Me,2,0,"i",64),d.YNc(32,Pe,2,0,"i",65),d.qZA(),d.qZA()}if(2&e){const e=d.MAs(14),t=d.oxw(2).$implicit,o=d.oxw(5);d.Q6J("ngClass",d.VKq(9,Ee,null==o.selectedForms?null:o.selectedForms.includes(t.value))),d.xp6(10),d.Oqu(o.favs.includes(t.value?t.value:t.id)?"start":"star_outline"),d.xp6(2),d.Q6J("ngIf",o.formsbyId&&o.enableBuildPublishTab(t,o.formsbyId))("ngIfElse",e),d.xp6(4),d.Q6J("ngIf",o.formsbyId&&o.enableDefine(t,o.formsbyId)),d.xp6(1),d.Q6J("ngIf",o.formsbyId&&o.enableBuildPublishTab(t,o.formsbyId)&&o.formPermissions.canEdit),d.xp6(1),d.Q6J("ngIf",o.enableBuildPublishTab(t)&&o.formPermissions.canEdit),d.xp6(13),d.Q6J("ngIf",o.formPermissions.canEdit),d.xp6(1),d.Q6J("ngIf",o.formPermissions.canDelete)}}function Le(e,t){if(1&e&&(d.ynx(0),d.YNc(1,Oe,33,11,"div",43),d.BQk()),2&e){const e=d.oxw().$implicit,t=d.oxw(5);let o;d.xp6(1),d.Q6J("ngIf",0===t.searchedString.length||(null==e||null==e.text?null:e.text.toLowerCase().includes(null==t.searchedString||null==(o=t.searchedString.trim())?null:o.toLowerCase())))}}function De(e,t){if(1&e&&(d.ynx(0),d.YNc(1,Le,2,1,"ng-container",33),d.BQk()),2&e){const e=t.index,o=d.oxw(3).$implicit,i=d.oxw(2);d.xp6(1),d.Q6J("ngIf",i.searchedString.length>0||(null==o?null:o.expanded)||!(null!=o&&o.expanded)&&e<3)}}function Qe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",75),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(4).$implicit;return t.expanded=!t.expanded}),d._uU(1),d.qZA()}if(2&e){const e=d.oxw(4).$implicit;d.xp6(1),d.hij("Browse all ",null==e||null==e.forms?null:e.forms.length," forms in this folder")}}function Ye(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",75),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(4).$implicit;return t.expanded=!t.expanded}),d._uU(1,"Hide all forms in this folder"),d.qZA()}}function He(e,t){if(1&e&&(d.TgZ(0,"div",71),d.TgZ(1,"div",72),d.YNc(2,Qe,2,1,"span",73),d.YNc(3,Ye,2,0,"span",73),d.TgZ(4,"span",74),d._uU(5,"navigate_next"),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw(3).$implicit;d.xp6(2),d.Q6J("ngIf",!e.expanded),d.xp6(1),d.Q6J("ngIf",e.expanded)}}function Be(e,t){if(1&e&&(d.TgZ(0,"div",35),d.TgZ(1,"div",36),d.TgZ(2,"span",37),d.TgZ(3,"i",38),d._uU(4,"folder"),d.qZA(),d.qZA(),d.TgZ(5,"span",39),d._uU(6),d.qZA(),d.TgZ(7,"span",40),d._uU(8),d.qZA(),d.qZA(),d.TgZ(9,"div",41),d.YNc(10,De,2,1,"ng-container",10),d.qZA(),d.YNc(11,He,6,2,"div",42),d.qZA()),2&e){const e=d.oxw(2).$implicit,t=d.oxw(2);let o,i;d.Udp("display",0===t.searchedString.length||null!=e.childNameList&&null!=(o=e.childNameList.toLowerCase())&&o.includes(null==t.searchedString||null==(i=t.searchedString.trim())?null:i.toLowerCase())?"block":"none"),d.xp6(6),d.hij(" ",e.folderPath," "),d.xp6(2),d.hij(" ",null==e||null==e.forms?null:e.forms.length," "),d.xp6(2),d.Q6J("ngForOf",null==e?null:e.forms),d.xp6(1),d.Q6J("ngIf",0===t.searchedString.length&&(null==e||null==e.forms?null:e.forms.length)>3)}}function We(e,t){if(1&e&&(d.ynx(0),d.YNc(1,Be,12,6,"div",34),d.BQk()),2&e){const e=d.oxw(3);d.xp6(1),d.Q6J("ngIf",e.formPermissions.canView)}}function $e(e,t){if(1&e&&(d.ynx(0),d.YNc(1,We,2,1,"ng-container",33),d.BQk()),2&e){const e=t.$implicit,o=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!o.selectedFolder||!o.viewBy&&o.selectedFolder&&e.folderId===o.selectedFolder)}}function je(e,t){if(1&e&&(d.ynx(0),d.YNc(1,_e,15,11,"div",8),d.TgZ(2,"div",9),d.YNc(3,$e,2,1,"ng-container",10),d.qZA(),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",e.formPermissions.canView),d.xp6(2),d.Q6J("ngForOf",e.formsList)}}function ze(e,t){1&e&&(d.TgZ(0,"div",76),d._UZ(1,"span"),d._UZ(2,"span"),d._UZ(3,"span"),d.qZA())}const Ve=[{path:"",component:(()=>{class e{constructor(e,t,o,i,n){this.http=e,this.store=t,this.modalService=o,this.router=i,this.dataSharingService=n,this.searchedString="",this.pageDetail={pageNumber:1,pageSize:14},this.selectedFolder=null,this.viewBy=null,this.selectedForms=[],this.selectedFormName=[],this.viewFilterDropdown=!1,this.searchedFormKeyword="",this.FilterAttribute="null",this.favs=[],this.dataLoaded=!1,this.stripePromise=(0,de.J)("pk_test_51IclahSHmdevWCqrjzhp4868a8lTtKZ8a4meW7CVlQstDeu7GIPW9ChZEWYvGlBGSiOFIyWLr7N4O43Rrc7IJzUP00Bo6EZPFW"),this.userInfoSubscription$=this.store.select(s.S8).subscribe(e=>{console.log(e),this.userInfo=e;let t=this.dataSharingService.GetUserWorkspaceList();this.selectedWorkspaceId=t.id,this.getFormsList(e)}),this.formPermissions=this.dataSharingService.GetPermissions("Forms")}checkOut(){var e=this;return(0,r.Z)(function*(){return yield e.stripePromise})()}session(){this.checkOut().then(e=>{this.http.call("StripeSession","POST",{userInfo:this.userInfo,plan:"MG Super Test",url:window.location.href}).subscribe(t=>e.redirectToCheckout({sessionId:t.id}))})}getFormsList(e){e&&(this.getFoldersWithList(e),this.http.call("getAllActiveForms","POST",{UserId:e.Id,WorkSpaceId:this.selectedWorkspaceId}).subscribe(e=>{this.allForms=e,this.formsbyId=l.groupBy(this.allForms,"id"),this.allForms.forEach(e=>{e.isFavourite&&this.favs.push(e.id)}),this.dataLoaded=!0}),this.http.call("getFolders","POST",{WorkSpaceId:this.selectedWorkspaceId}).subscribe(e=>{this.folderList=e}))}getFormId(e){return e.value?e.value:e.id}enableStarred(e){var t;const o=this.getFormId(e);(null===(t=this.favs)||void 0===t?void 0:t.includes(o))?this.favs=this.favs.filter(e=>e!==o):this.favs.push(o),this.http.call("UpdateFormAttributes","POST",{FormUpdateAction:"IsFavourite",Id:o}).subscribe(e=>{})}getNotification(e){this.http.call("GetNotifications","POST",{ToUserId:e.Id}).subscribe(e=>{this.notifications=e})}getFoldersWithList(e){if(e){const t=Object.assign({FilterAttribute:this.FilterAttribute,SearchKeyword:this.searchedFormKeyword,UserId:e.Id,WorkSpaceId:this.selectedWorkspaceId},this.pageDetail);this.http.call("GetFoldersListWithForms","POST",t).subscribe(e=>{const t=[];this.getfolderNameWithForms(e,t),this.formsList=t,this.folderListWithForms=t})}}selectBulkForms(e){const t=e.value?e.value:e.id;this.selectedForms.includes(t)?(this.selectedForms=this.selectedForms.filter(e=>t!==e),this.selectedFormName=this.selectedForms.filter(o=>t!==o&&(null==e?void 0:e.name)!==o&&(null==e?void 0:e.text)!==o)):(this.selectedForms.push(t),this.selectedFormName.push(e.text?e.text:e.name))}get bulkId(){return this.selectedForms.join(",")}getfolderNameWithForms(e,t){e.forEach(e=>{var o;(null===(o=null==e?void 0:e.childrenForms)||void 0===o?void 0:o.length)>0&&t.push({folderPath:e.folderPath,text:e.text,folderId:e.value,forms:e.childrenForms.map(t=>(t.folderId=e.value,t)),childNameList:function(){let t="";return null==e||e.childrenForms.forEach(e=>{t+="/"+e.text}),t}()}),(null==e?void 0:e.childrenFolders)&&this.getfolderNameWithForms(null==e?void 0:e.childrenFolders,t)})}ngOnInit(){}selectionChange(e){"StarredForms"!==this.viewBy&&"ArchievedForms"!==this.viewBy||(this.formsList=JSON.parse(JSON.stringify(this.folderListWithForms))),this.viewBy=null,this.selectedFolder=e}open(){const e=this.modalService.open(w,{size:"lg"});e.componentInstance.formsList=this.allForms,e.componentInstance.userId=this.userInfo.Id,e.result.then(e=>{"close"!==e&&this.openEdit(e)},e=>{console.log("Dismissed ")})}editForm(e){var t,o;const i=e.value?e.value:e.id,n=null===(o=null===(t=this.formsbyId)||void 0===t?void 0:t[i])||void 0===o?void 0:o[0];console.log(n),this.http.call("GetFormDesign","POST",{FormEntriesId:null,Id:i,Name:null,WorkSpaceName:null,userID:this.userInfo.Id}).subscribe(e=>{const t=this.modalService.open(Y,{size:"lg"});t.componentInstance.folderList=this.folderList,t.componentInstance.type=n.formType,t.componentInstance.modalType="Edit",t.componentInstance.workSpaceId=this.selectedWorkspaceId,t.componentInstance.userId=this.userInfo.Id,t.componentInstance.config={name:e.name,description:e.description,folderID:e.folderID,isActive:e.isActive,formType:e.formType,id:e.id},t.result.then(e=>{console.log(`Closed with: ${e}`),this.getFormsList(this.userInfo)},e=>{console.log("Dismissed ")})})}openEdit(e){const t=this.modalService.open(Y,{size:"lg"});t.componentInstance.folderList=this.folderList,t.componentInstance.type=e,t.componentInstance.modalType="Add",t.componentInstance.workSpaceId=this.selectedWorkspaceId,t.componentInstance.userId=this.userInfo.Id,t.componentInstance.config={},t.result.then(t=>{console.log(`Closed with: ${t}`),"added"===(null==t?void 0:t.message)&&(this.dataSharingService.UpdateHeaderUserPlanDetail(this.userInfo.Id,this.selectedWorkspaceId),this.router.navigate(["/form-builder"],{queryParams:{ID:t.res.id,seletedTab:"WorkFlow"===e?0:1}}))},e=>{console.log("Dismissed ")})}openbuilder(e,t){this.router.navigate(["/form-builder"],{queryParams:{ID:e.value,seletedTab:t}})}openBuilderByName(e,t){let o=!1;this.allForms.forEach(t=>{t.id===e.value&&"WorkFlow"===t.formType&&(o=!0)}),this.router.navigate(["/form-builder"],{queryParams:{ID:e.value,seletedTab:o?0:t}})}openFormURL(e){this.router.navigate([`/blazeforms/${this.userInfo.WorkSpaceName.split(" ").join("_")}/${e.text?e.text.split(" ").join("_"):e.name.split(" ").join(l)}`])}openPermissions(e){console.log("openPermissions",e);const t=this.modalService.open($,{size:"lg"});t.componentInstance.form=e,t.result.then(e=>{},e=>{console.log("Dismissed ")})}move(e){console.log("move",e,this.folderList);const t=this.modalService.open(j,{size:"lg"});t.componentInstance.folderList=this.folderList,t.componentInstance.form=e,t.result.then(e=>{"close"!==e&&(this.getFoldersWithList(this.userInfo),this.selectedForms=[],this.selectedFormName=[])},e=>{console.log("Dismissed ")})}archive(e){const t=this.modalService.open(H,{size:"lg"});t.componentInstance.message=e.bulk?"All Selected forms will be archived. Are you sure you wish to proceed?":`Are you sure you want to archive ${e.text} forms ?`,t.componentInstance.modalName="Archive",t.result.then(t=>{"close"!==t&&this.http.call("archive","POST",{Action:"Archive",FormIds:e.value}).subscribe(e=>{this.dataLoaded=!1,this.getFormsList(this.userInfo),this.selectedForms=[],this.selectedFormName=[]})},e=>{console.log("Dismissed ")})}bulkDelete(){this.deleteForm({text:this.selectedFormName.join(","),value:this.bulkId,bulk:!0})}bulkMove(){this.move({text:this.selectedFormName.join(","),value:this.bulkId,bulk:!0})}bulkArchive(){this.archive({text:this.selectedFormName.join(","),value:this.bulkId,bulk:!0})}deleteForm(e){const t=this.modalService.open(H,{size:"lg"});t.componentInstance.message=e.bulk?"All Selected forms will be deleted. Are you sure you wish to proceed?":`Are you sure you want to delete <strong>${e.text}</strong> ?`,t.componentInstance.modalName="Delete",t.result.then(t=>{"close"!==t&&this.http.call("archive","POST",{Action:"Delete",FormIds:e.value}).subscribe(e=>{this.getFormsList(this.userInfo),this.selectedForms=[],this.selectedFormName=[],this.dataSharingService.UpdateHeaderUserPlanDetail(this.userInfo.Id,this.selectedWorkspaceId)})},e=>{console.log("Dismissed ")})}openModal(e){const t=this.modalService.open(le,{size:"lg"});t.componentInstance.formId=e,t.componentInstance.modalType="permission",t.componentInstance.workSpaceId=this.selectedWorkspaceId,t.result.then(e=>{},e=>{console.log("Dismissed ")})}openAddNewFolderModal(){const e=this.modalService.open(E,{size:"lg"});e.componentInstance.folderList=this.folderList,e.componentInstance.workSpaceId=this.selectedWorkspaceId,e.componentInstance.userId=this.userInfo.Id,e.result.then(e=>{"close"!==e&&this.getFormsList(this.userInfo)},e=>{console.log("Dismissed ")})}changeViewBy(e){this.selectedFolder=null,this.viewBy=e,"All Forms"===e?this.getFormsList(this.userInfo):this.getFilteredForm()}getFilteredForm(){this.http.call("getFormsList","POST",{FilterAttribute:this.viewBy,SearchKeyword:"",UserId:this.userInfo.Id,WorkSpaceId:this.selectedWorkspaceId,pageNumber:1,pageSize:14}).subscribe(e=>{var t;"StarredForms"===this.viewBy?null===(t=null==e?void 0:e.res)||void 0===t||t.forEach(e=>{this.favs.push(e.id)}):this.favs=[],this.formsList=[{folderPath:"StarredForms"===this.viewBy?"All Starred Forms":"All Archived Forms",forms:e.res}],console.log(e)})}enableBuildPublishTab(e,t){var o,i,n,r,s,l,d,c,a,u,m;return"WorkFlow"!==(null===(n=null===(i=null===(o=this.formsbyId)||void 0===o?void 0:o[e.value])||void 0===i?void 0:i[0])||void 0===n?void 0:n.formType)||!((null===(d=null===(l=null===(s=null===(r=this.formsbyId)||void 0===r?void 0:r[e.value])||void 0===s?void 0:s[0])||void 0===l?void 0:l.formEntries)||void 0===d?void 0:d.length)>0||(null===(u=null===(a=null===(c=this.formsbyId)||void 0===c?void 0:c[e.value])||void 0===a?void 0:a[0])||void 0===u?void 0:u.createdBy)!==(null===(m=this.userInfo)||void 0===m?void 0:m.Id))}enableDefine(e,t){var o,i,n,r,s,l,d;return"WorkFlow"===(null===(n=null===(i=null===(o=this.formsbyId)||void 0===o?void 0:o[e.value])||void 0===i?void 0:i[0])||void 0===n?void 0:n.formType)&&(null===(r=this.userInfo)||void 0===r?void 0:r.Id)===(null===(d=null===(l=null===(s=this.formsbyId)||void 0===s?void 0:s[e.value])||void 0===l?void 0:l[0])||void 0===d?void 0:d.createdBy)}enableUrl(){}ngOnDestroy(){this.userInfoSubscription$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.O),d.Y36(ce.yh),d.Y36(c.FF),d.Y36(n.F0),d.Y36(ae.j))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-forms"]],decls:11,vars:3,consts:[[1,"hero-banner","container-fluid","py-4","bg-light","mb-4","border-bottom"],[1,"container","py-4"],[1,"forms-container","container"],[1,"search-wrapper"],[1,"form-group","has-search","mb-5"],["type","text","placeholder","Search Forms",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["loading",""],["class","forms-controls-wrapper d-flex flex-wrap justify-content-between mb-5",4,"ngIf"],[1,"folder-list-with-forms"],[4,"ngFor","ngForOf"],[1,"forms-controls-wrapper","d-flex","flex-wrap","justify-content-between","mb-5"],[1,"add-form-wrapper"],["type","button","id","add-form",1,"btn","btn-bf","btn-sm",3,"click"],[1,"forms-filters-wrapper"],["role","button",1,"material-icons","mr-3",3,"ngClass","click"],["role","button","data-toggle","tooltip","title","Delete",1,"material-icons","mr-3",3,"ngClass","click"],["role","button","data-toggle","tooltip","title","Move Form",1,"material-icons","mr-3",3,"ngClass","click"],["role","button","data-toggle","tooltip","title","Filter",1,"material-icons",3,"click"],["class","filter-dropdown bg-white rounded shadow filter-down",4,"ngIf"],["class","filter-dropdown-overlay-wrap",4,"ngIf"],[1,"filter-dropdown","bg-white","rounded","shadow","filter-down"],[1,"filter-dropdown-top","border-bottom","mb-2"],[1,"filter-dropdown-item","py-2","px-5","border-bottom",3,"click"],[1,"filter-dropdown-item","py-2","px-5",3,"click"],[3,"selectedFolder","data","selectFolderEvent",4,"ngIf"],[1,"filter-dropdown-bottom","py-2","text-center"],[1,"filter-dropdown-item","py-2","px-5",3,"ngClass","click"],["class","material-icons-round selected-item-tick align-bottom text-bf",4,"ngIf"],[3,"selectedFolder","data","selectFolderEvent"],[1,"material-icons-round","selected-item-tick","align-bottom","text-bf"],[1,"filter-dropdown-overlay-wrap"],[1,"filter-dropdown-overlay","position-fixed","w-100","h-100",3,"click"],[4,"ngIf"],["class","forms-folder-wrapper row mb-5",3,"display",4,"ngIf"],[1,"forms-folder-wrapper","row","mb-5"],[1,"folder-header","col-md-12","mb-2"],[1,"folder-icon","me-2"],[1,"material-icons-outlined"],[1,"folder-name"],[1,"ml-1","badge","badge-success"],[1,"forms-list","col-md-12","border","rounded"],["class","folder-more col-md-12 py-3",4,"ngIf"],["class","form-list-item row p-3 border-bottom",3,"ngClass",4,"ngIf"],[1,"form-list-item","row","p-3","border-bottom",3,"ngClass"],[1,"form-checkbox-wrapper","col-md-1"],[1,"p-0","m-0","align-bottom"],["type","checkbox"],[1,"form-checkbox-wrap",3,"click"],[1,"form-checkbox-deactive","material-icons-round","mr-1","text-dark"],[1,"form-checkbox-active","material-icons-round","mr-1"],[1,"material-icons-round","start-style",3,"click"],[1,"form-title-wrapper","col-md-4"],["clickAble",""],[1,"form-badges-wrapper","col-md-4"],["class","build-badge px-2 py-1 mr-1 rounded-pill small border border-2","role","button",3,"click",4,"ngIf"],["class","publish-badge px-2 py-1 mr-1 rounded-pill small border border-2","role","button",3,"click",4,"ngIf"],["role","button",1,"entries-badge","py-1","mr-1","rounded-pill","small","border","border-2",3,"click"],[1,"pl-2","pr-1"],["role","button",1,"url-badge","px-2","py-1","rounded-pill","small","border","border-2",3,"click"],[1,"form-actions-wrapper","col-md-3","d-flex","d-wrap","justify-content-end"],["role","button","data-toggle","tooltip","title","Premissions",1,"material-icons-round","mr-3","text-dark",3,"click"],["role","button","data-toggle","tooltip","title","Move Form",1,"material-icons-round","mr-3","text-dark",3,"click"],["role","button","data-toggle","tooltip","title","Archive",1,"material-icons-round","mr-3","text-dark",3,"click"],["role","button","data-toggle","tooltip","title","Edit","class","material-icons-round mr-3 text-dark","data-bs-toggle","modal","data-bs-target","#edit-form-modal",3,"click",4,"ngIf"],["role","button","data-toggle","tooltip","title","Delete","class","material-icons-round text-dark",3,"click",4,"ngIf"],[1,"form-name",3,"click"],["role","button",1,"build-badge","px-2","py-1","mr-1","rounded-pill","small","border","border-2",3,"click"],["role","button",1,"publish-badge","px-2","py-1","mr-1","rounded-pill","small","border","border-2",3,"click"],["role","button","data-toggle","tooltip","title","Edit","data-bs-toggle","modal","data-bs-target","#edit-form-modal",1,"material-icons-round","mr-3","text-dark",3,"click"],["role","button","data-toggle","tooltip","title","Delete",1,"material-icons-round","text-dark",3,"click"],[1,"folder-more","col-md-12","py-3"],[1,"text-right","text-bf"],["class","align-top","role","button",3,"click",4,"ngIf"],[1,"material-icons-round"],["role","button",1,"align-top",3,"click"],["id","loader-4",1,"loader","text-center","vh-100","w-100"]],template:function(e,t){if(1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2"),d._uU(3,"Forms"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(4,"div",2),d.TgZ(5,"div",3),d.TgZ(6,"div",4),d.TgZ(7,"input",5),d.NdJ("ngModelChange",function(e){return t.searchedString=e}),d.qZA(),d.qZA(),d.qZA(),d.YNc(8,je,4,2,"ng-container",6),d.YNc(9,ze,4,0,"ng-template",null,7,d.W1O),d.qZA()),2&e){const e=d.MAs(10);d.xp6(7),d.Q6J("ngModel",t.searchedString),d.xp6(1),d.Q6J("ngIf",t.dataLoaded)("ngIfElse",e)}},directives:[x.Fj,x.JJ,x.On,i.O5,i.sg,i.mk,we],styles:[".disabled[_ngcontent-%COMP%]{opacity:.65;pointer-events:none}.filter-down[_ngcontent-%COMP%]{z-index:99999;position:absolute;background:#fff}.filter-dropdown-top[_ngcontent-%COMP%]   .filter-dropdown-item[_ngcontent-%COMP%]{cursor:pointer}.filter-dropdown-top[_ngcontent-%COMP%]   .filter-dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#f04564}.filter-dropdown-folder-list[_ngcontent-%COMP%]{height:100px}.start-style[_ngcontent-%COMP%]{width:42%}.filter-dropdown-bottom[_ngcontent-%COMP%]   .filter-dropdown-item[_ngcontent-%COMP%], .filter-dropdown-folder-list[_ngcontent-%COMP%]   .filter-dropdown-folder-item[_ngcontent-%COMP%], .form-list-item[_ngcontent-%COMP%]   .form-title-wrapper[_ngcontent-%COMP%]   .form-name[_ngcontent-%COMP%], .start-style[_ngcontent-%COMP%]{cursor:pointer}.filter-dropdown-bottom[_ngcontent-%COMP%]   .filter-dropdown-item[_ngcontent-%COMP%]   .selected-item-tick[_ngcontent-%COMP%]{margin-left:-24px}"]}),e})()}];let Ke=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.Bz.forChild(Ve)],n.Bz]}),e})(),Ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[i.ez,Ke,c.IJ,x.u5,q.dp,I.Ps,x.UX]]}),e})()},16304:(e,t,o)=>{"use strict";function i(e,t,o,i,n,r,s){try{var l=e[r](s),d=l.value}catch(c){return void o(c)}l.done?t(d):Promise.resolve(d).then(i,n)}function n(e){return function(){var t=this,o=arguments;return new Promise(function(n,r){var s=e.apply(t,o);function l(e){i(s,n,r,l,d,"next",e)}function d(e){i(s,n,r,l,d,"throw",e)}l(void 0)})}}o.d(t,{Z:()=>n})}}]);