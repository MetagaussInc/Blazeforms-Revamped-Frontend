<!-- <ng-container *ngIf="formLoaded; else loading"> -->

<ng-container *ngIf="formLoaded; else loading">
    <div class="form-builder-header container-fluid">
        <div class="form-builder-wrap pt-2 row border-bottom" id="form-builder">

            <div class="col-md-2 text-center">
                <div ngbDropdown class="d-inline-block btn-group w-100 dropdown-split-warning">
                    <button class="btn border text-muted w-100 text-left" id="forms-listing-selector"
                        ngbDropdownToggle>{{builderObj.name}}<i class="material-icons float-right"> expand_more
                        </i></button>
                    <div ngbDropdownMenu aria-labelledby="forms-listing-selector"
                        class="forms-listing-dropdown overflow-auto scroller w-100 py-2">
                        <a *ngFor="let form of formsList" class="border-bottom" (click)="openForm(form)"
                            ngbDropdownItem>{{form.name}}</a>
                    </div>
                </div>
            </div>

            <div class="col-md-8">
                <ul ngbNav #nav="ngbNav" [(activeId)]="mainTab"
                    class="nav nav-tabs justify-content-center border-0 bg-white" id="form-builder-topbar">
                     <li [ngbNavItem]="0" ngbNavItem *ngIf="builderObj?.formType === 'WorkFlow'">
                        <a ngbNavLink> <i class="material-icons"> construction </i>Define</a>
                        <ng-template ngbNavContent>
                            <div class="hero-banner container-fluid py-4 bg-light mb-4 border-bottom">
                                <div class="container py-4">
                                    <h2>Workflow</h2>
                                </div>
                            </div>

                            <div class="Workflow-container container">

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card workflow-box">
                                            <h5 class="card-header">Invite Users</h5>
                                            <div class="card-body">

                                                <p class="card-text  d-flex h6 info-box-text">
                                                    <span class="material-icons-outlined mr-2">
                                            info
                                        </span> You may add any user within the organization or invite user outside the organization by entering their emails below. Invited users will get email notification to activate themselves. Users added as owners
                                                    has full rights to edit workflow, modify levels, assign participants and design workflow forms.</p>

                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <div class="card workflow-box">
                                            <h5 class="card-header">Define owners for this workflow</h5>
                                            <div class="card-body">

                                                <div  class="form-group">
                                                    <label></label>
                                                    <input [ngClass]="{'disabled': builderObj.hasEntries}" id="text1" name="text1" type="text" [(ngModel)]="userSerach" placeholder="Enter name or email of users to add as owner" class="form-control">
                                                    <div *ngIf="userSerach?.length > 0" class="autocomplete-users-list  border shadow">
                                                        <ng-container *ngFor="let user of workFLowDetails?.workSpaceUsers" >
                                                            <div *ngIf="user.email?.includes(userSerach) || user.firstName?.includes(userSerach) || user.lastName?.includes(userSerach)" class="workflow-list col-md-12  rounded">
                                                                <div class="workflow-list-item row p-3 border-bottom">
                                                                <div class="workflow-img-wrapper col-md-1">
                                                                    <img src="assets/images/user.jpg" class="user-profile-img rounded-circle" alt="" title="" width="40" height="40">
                                                                </div>
                                                                <div class="workflow-user-email-wrapper col-md-9">
                                                                    <div clss="workflow-user-name">{{user.firstName}} {{user.lastName}}</div>
                                                                    <span class="workflow-user-email text-muted"><i>{{user.email}}</i></span>
                                                                </div>

                                                                <div class="added-user-title-wrapper col-md-2">
                                                                    <button class="btn btn-primary btn-bf" (click)="addUserToWorkFlow(user.id)">Add</button>
                                                                </div>

                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngFor="let user of workFLowDetails?.workSpaceUsers; let i = index">
                                                            <div *ngIf=" i === 0 && !user.email?.includes(userSerach) && !user.firstName?.includes(userSerach) && !user.lastName?.includes(userSerach)" class="autocomplete-not-found-wrapper autocomplete-users-list border shadow p-3" >
                                                                <div class="autocomplete-not-found my-3">
                                                                    <strong>{{userSerach}}</strong> Search not found in the organization. want to invite?
                                                                </div>
                                                                <div clss="user-selector form-group">
                                                                    <label for="select" class=" col-form-label"></label>

                                                                      <select [disabled]="!userSerach?.includes('@') || !userSerach?.includes('.com')" id="select" name="select" class="custom-select" (change)="selectRole($event)" >
                                                                        <option *ngFor="let role of workFLowDetails?.roles" [value]="role.id">{{role.name}}</option>
                                                                      </select>
                                                                    </div>
                                                                      <div clss="user-invit-button form-group row"> <button name="invite" type="button" (click)="inviteUser()" class="btn btn-primary btn-bf mt-3" [disabled]="!userSerach?.includes('@') || !userSerach?.includes('.com')">Invite</button></div>

                                                            </div>
                                                        </ng-container>


                                                    </div>



                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <h4>Added Users</h4>
                                        <div class="added-users-list col-md-12 border rounded">
                                            <ng-container *ngFor="let user of workFLowDetails?.workSpaceUsers" >
                                                <div *ngIf="addedUserId?.includes(user.id)" class="added-user-item row p-3 border-bottom border rounded">

                                                    <div class="added-user-title-wrapper col-md-1">
                                                        <img src="assets/images/user.jpg" class="user-profile-img rounded-circle" alt="" title="" width="40" height="40">
                                                    </div>
                                                    <div class="added-user-title-wrapper col-md-6">
                                                        <div clss="added-user-name">{{user.firstName}} {{user.lastName}}</div>
                                                        <span class="text-muted"><i>{{user.email}}</i></span>
                                                    </div>

                                                    <div class="added-user-title-wrapper col-md-3">
                                                        <span *ngIf="user.isLinkActivated" class="badge badge-pill badge-success py-2 px-3 mt-2">Activated</span>
                                                        <span *ngIf="!user.isLinkActivated" class="badge badge-pill badge-warning py-2 px-3 mt-2">Pending</span>
                                                    </div>
                                                    <div class="added-user-actions-wrapper col-md-2 d-flex d-wrap justify-content-end">

                                                        <i class="material-icons-round text-dark" (click)="deleteUser(user.id)">delete</i>
                                                    </div>
                                                </div>
                                            </ng-container>



                                        </div>
                                    </div>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <div class="card workflow-box">
                                            <h5 class="card-header">Define various levels to this workflow</h5>
                                            <div class="card-body">

                                                <p class="card-text">
                                                    You may add any user within the organization or invite user outside the organization by entering their emails below. Invited users will get email notification to activate themselves. Users added as owners has full rights to edit workflow, modify levels,
                                                    assign participants and design workflow forms.</p>

                                                    <div class="row mt-3" *ngIf="workFLowDetails?.workFlowLevels.length > 0">
                                                      <div class="col">
                                                          <div class=" multi-collapse card">
                                                              <h5 class="card-header">Added Levels</h5>
                                                              <div class="card-body workflow-levels">
                                                                  <div class="ngx-dnd-container" [ngxDroppable]="'example-two'">
                                                                      <div class="ngx-dnd-item" [ngxDraggable]="['example-two']" *ngFor="let item of workFLowDetails?.workFlowLevels" class="">
                                                                          <div class="row">
                                                                          <div class="col-md-8">
                                                                              <div class="form-group"  >

                                                                                  <input [ngClass]="{'disabled': builderObj.hasEntries}" name="text1" [value]="item.level" (keyup)="changeLevel($event, item)" type="text" class="form-control">
                                                                              </div>
                                                                          </div>

                                                                          <div class="col-md-4 text-right">
                                                                              <span class="material-icons animate-mat collapsed mr-1" title="Add Participants" (click)="item.expanded = !item.expanded">person_add</span>
                                                                              <span class="material-icons animate-mat mr-1" title="Drag n Drop">open_with</span>
                                                                              <!-- <span class="material-icons animate-mat mr-1" title="Edit">edit</span> -->
                                                                              <span [ngClass]="{'disabled': builderObj.hasEntries}" class="material-icons animate-mat mr-1" title="Delete" (click)="deleteFormLevel(item.id)">delete</span>
                                                                              <span class="material-icons-outlined mr-1" (click)="item.expanded = !item.expanded"> expand_more </span>
                                                                          </div>
                                                                          </div>
                                                                          <div class="row my-3">
                                                                          <div class="col-12">
                                                                              <ng-container *ngFor="let flowUsers of workFLowDetails?.workFlowUsers">
                                                                                  <div *ngIf="item .id === flowUsers.levelId"  class="added-user-item row p-3 border-bottom">

                                                                                      <div class="added-user-title-wrapper col-md-1">
                                                                                          <img src="assets/images/user.jpg" class="user-profile-img rounded-circle" alt="" title="" width="40" height="40">
                                                                                      </div>
                                                                                      <div class="added-user-title-wrapper col-md-6">
                                                                                          <div clss="added-user-name">{{flowUsers.userName}}</div>
                                                                                          <span class="text-muted"><i>{{flowUsers.email}}</i></span>
                                                                                      </div>

                                                                                      <div class="added-user-title-wrapper col-md-3">
                                                                                          <span *ngIf="flowUsers.isLinkActivated" class="badge badge-pill badge-success py-2 px-3 mt-2">Activated</span>
                                                                                          <span *ngIf="!flowUsers.isLinkActivated" class="badge badge-pill badge-warning py-2 px-3 mt-2">Pending</span>
                                                                                      </div>
                                                                                      <div class="added-user-actions-wrapper col-md-2 d-flex d-wrap justify-content-end">

                                                                                          <i class="material-icons-round text-dark" (click)="deleteUserFromLevel(flowUsers.userId)">delete</i>
                                                                                      </div>
                                                                                  </div>
                                                                              </ng-container>


                                                                          </div>
                                                                          </div>
                                                                          <div *ngIf="item.expanded" class="row">
                                                                              <div class="col-md-12">
                                                                                  <div class="form-group">

                                                                                      <input name="text2" (keyup)="userNameChange($event, item)" placeholder="Add user to {{item.level}}"  type="text" class="form-control">
                                                                                      <div *ngIf="item.userSerachForLevel?.length > 0" class="border shadow">
                                                                                          <ng-container *ngFor="let user of workFLowDetails?.workSpaceUsers; let wIndex = index"  class="rounded">
                                                                                              <div *ngIf="user.email?.includes(item.userSerachForLevel) || user.firstName?.includes(item.userSerachForLevel) || user.lastName?.includes(item.userSerachForLevel)" class="workflow-list-item row p-3 border-bottom">

                                                                                                  <div class="added-user-title-wrapper col-md-1">
                                                                                                      <img src="assets/images/user.jpg" class="user-profile-img rounded-circle" alt="" title="" width="40" height="40">
                                                                                                  </div>
                                                                                                  <div class="added-user-title-wrapper col-md-9">
                                                                                                      <div clss="added-user-name">{{user.firstName}} {{user.lastName}}</div>
                                                                                                      <span class="text-muted"><i>{{user.email}}</i></span>
                                                                                                  </div>

                                                                                                  <div class="added-user-title-wrapper col-md-2">
                                                                                                      <button class="btn btn-primary btn-bf" (click)="addUserToWorkFlowLevel(user.id, item.id)">Add</button>
                                                                                                  </div>
                                                                                                  <div class="added-user-actions-wrapper col-md-2 d-flex d-wrap justify-content-end">

                                                                                                  </div>
                                                                                              </div>
                                                                                              <div *ngIf=" wIndex === 0 && !user.email?.includes(item.userSerachForLevel) && !user.firstName?.includes(item.userSerachForLevel) && !user.lastName?.includes(item.userSerachForLevel)" class="autocomplete-not-found-wrapper autocomplete-users-list border shadow p-3" >
                                                                                                <div class="autocomplete-not-found my-3">
                                                                                                    <strong>{{item.userSerachForLevel}}</strong> Search not found in the organization. want to invite?
                                                                                                </div>
                                                                                                <div clss="user-selector form-group">
                                                                                                    <label for="select" class=" col-form-label"></label>

                                                                                                      <select [disabled]="!item.userSerachForLevel?.includes('@') || !item.userSerachForLevel?.includes('.com')" id="select" name="select" class="custom-select" (change)="selectRole($event)" >
                                                                                                        <option *ngFor="let role of workFLowDetails?.roles" [value]="role.id">{{role.name}}</option>
                                                                                                      </select>
                                                                                                    </div>
                                                                                                      <div clss="user-invit-button form-group row"> <button name="invite" type="button" (click)="inviteUserforLevel(item.id, item.userSerachForLevel)" class="btn btn-primary btn-bf mt-3" [disabled]="!item.userSerachForLevel?.includes('@') || !item.userSerachForLevel?.includes('.com')">Invite</button></div>

                                                                                            </div>
                                                                                          </ng-container>
                                                                                      </div>
                                                                                  </div>
                                                                              </div>

                                                                          </div>
                                                                      </div>
                                                                    </div>

                                                              </div>
                                                          </div>
                                                      </div>

                                                  </div>
                                                <div class="text-center" > <a [ngClass]="{'disabled': builderObj.hasEntries}" class="btn btn-primary btn-bf" (click)="addLevels(null, null, true)">Add Levels</a></div>

                                            </div>
                                        </div>
                                    </div>
                                </div>





                                <div class="row my-3" *ngIf="workFLowDetails?.workFlowLevels.length > 0">
                                    <div class="col-md-12">
                                        <div class="card workflow-box">
                                            <h5 class="card-header">Build your form</h5>
                                            <div class="card-body">

                                                <p class="card-text">
                                                    You may add any under within the organization or invite user outside the organization by entering their emails below. Invited users will get email notification to activate theirselves. Users added as owners has full rights to edit workflow, modify levels,
                                                    assign participants and design workflow forms.</p>

                                                <div *ngIf="!builderObj.hasEntries" class="text-center"> <a  class="btn btn-primary btn-bf" (click)="mainTab = 1">Build</a></div>
                                                <div *ngIf="builderObj.hasEntries" class="text-center"> <a  class="btn btn-primary btn-bf" (click)="mainTab = 3">Entries</a></div>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </ng-template>
                    </li>
                    <li *ngIf="builderObj?.formType !== 'WorkFlow' || (!builderObj.hasEntries && builderObj?.formType === 'WorkFlow')" [ngbNavItem]="1" ng-container ngbNavItem>
                        <a ngbNavLink (click)="switchToBuild()"><i class="material-icons"> construction </i>Build</a>
                        <ng-template ngbNavContent>
                            <div id="main" class="row row-offcanvas row-offcanvas-left bg-light">
                                <div class="col-md-3 col-lg-2 sidebar-offcanvas form-builder-sidebar pl-0"
                                    id="form-builder-sidebar">

                                    <ul ngbNav #nav="ngbNav" [(activeId)]="viewProperties"
                                        class="nav nav-tabs bg-white justify-content-start nav-justified">
                                        <li [ngbNavItem]="0">
                                            <a ngbNavLink class="py-3">Controls</a>
                                            <ng-template ngbNavContent>
                                                <div class="form-field-control form-basic-control bg-white mb-2 pb-2">
                                                    <h4 class="text-center py-2 mb-2">Basic Controls</h4>
                                                    <ngx-dnd-container class="root-container"
                                                        [model]="sourceBuilderTools" [dropZones]="['builder-target']"
                                                        [copy]="true" [droppableItemClass]="'col-6 px-2 py-2'"
                                                        direction="mixed">
                                                        <ng-template let-item="model">
                                                            <a href="javascript:"
                                                                class="badge badge-pill w-100 border p-2 d-flex align-items-center">

                                                                <i class="{{item.iconClass}} m-1">{{item.iconName}}</i>
                                                                <span>{{item.name}}</span>

                                                            </a>
                                                        </ng-template>
                                                    </ngx-dnd-container>
                                                </div>
                                                <div class="form-field-control form-layout-control bg-white mb-2 pb-2">
                                                    <h4 class="text-center py-2 mb-2">Layout Controls</h4>
                                                    <ngx-dnd-container class="root-container" [model]="layout"
                                                        [dropZones]="['builder-target']" [copy]="true"
                                                        [droppableItemClass]="'col-6 px-2 py-2'" direction="mixed">
                                                        <ng-template let-item="model">
                                                            <a href="javascript:"
                                                                class="badge badge-pill w-100 border p-2 d-flex align-items-center">
                                                                <i class="{{item.iconClass}} m-1">{{item.iconName}}</i>
                                                                <span>{{item.name}}</span>
                                                            </a>
                                                        </ng-template>
                                                    </ngx-dnd-container>
                                                </div>
                                                <div
                                                    class="form-field-control form-advanced-control bg-white mb-2 pb-2">
                                                    <h4 class="text-center py-2 mb-2">Advanced Controls</h4>
                                                    <ngx-dnd-container class="root-container" [model]="advanced"
                                                        [dropZones]="['builder-target']" [copy]="true"
                                                        [droppableItemClass]="'col-6 px-2 py-2'" direction="mixed">
                                                        <ng-template let-item="model">
                                                            <a href="javascript:"
                                                                class="badge badge-pill w-100 border p-2 d-flex align-items-center">
                                                                <i class="{{item.iconClass}} m-1">{{item.iconName}}</i>
                                                                <span>{{item.name}}</span>
                                                            </a>
                                                        </ng-template>
                                                    </ngx-dnd-container>
                                                </div>


                                            </ng-template>
                                        </li>
                                        <li [ngbNavItem]="1">
                                            <a ngbNavLink class="py-3">Properties</a>
                                            <ng-template ngbNavContent>


                                                <div
                                                    class="form-field-control form-basic-properties bg-white mb-2 pb-2">
                                                    <div class="col-md-12">

                                                        <h4 class="text-center py-2 mb-2">Basic Properties</h4>

                                                        <div *ngIf="selectedElement?.validations?.label"
                                                            class="form-group">
                                                            <label for="text">Label</label>
                                                            <input id="text" name="text"
                                                                [(ngModel)]="selectedElement.name"
                                                                placeholder="Level Name Here" type="text" class="form-control">
                                                        </div>
                                                        <div *ngIf="selectedElement?.validations?.placeholder"
                                                            class="form-group">
                                                            <label for="text1">Placeholder Text</label>
                                                            <input id="text1" [(ngModel)]="selectedElement.placeholder"
                                                                name="text1" type="text" class="form-control">
                                                        </div>
                                                        <div *ngIf="selectedElement?.validations?.size"
                                                            class="form-group">
                                                            <label>Size</label>
                                                            <div>
                                                                <div *ngFor="let key of selectedElement.validations?.size.options"
                                                                    class="custom-controls-stacked">
                                                                    <div (click)="selectedElement.size = key.value"
                                                                        class="custom-control custom-radio">
                                                                        <input name="radio" [value]="key.value"
                                                                            [checked]="selectedElement.size === key.value"
                                                                            id="size_setting_radio{{key.label}}"
                                                                            type="radio" class="custom-control-input">
                                                                        <label for="size_setting_radio{{key.label}}"
                                                                            class="custom-control-label">{{key.label}}</label>
                                                                    </div>
                                                                </div>
                                                                <!-- <div class="custom-controls-stacked">
                                                            <div class="custom-control custom-radio">
                                                                <input name="radio" id="radio_1" type="radio" class="custom-control-input" value="Multiple Line">
                                                                <label for="radio_1" class="custom-control-label">Multiple Line</label>
                                                            </div>
                                                        </div>
                                                        <div class="custom-controls-stacked">
                                                            <div class="custom-control custom-radio">
                                                                <input name="radio" id="radio_2" type="radio" class="custom-control-input" value="Password">
                                                                <label for="radio_2" class="custom-control-label">Password</label>
                                                            </div>
                                                        </div> -->
                                                            </div>
                                                        </div>
                                                        <div *ngIf="selectedElement?.inputType === 'phoneNumber'"
                                                            class="form-group">
                                                            <div>
                                                                <div class="custom-controls-stacked">
                                                                    <div (click)="selectedElement.type = 'US'"
                                                                        class="custom-control custom-radio">
                                                                        <input name="radio" [value]="'US'"
                                                                            [checked]="selectedElement.type === 'US'"
                                                                            id="Type_setting_radio"
                                                                            name="Type_setting_radio"
                                                                            type="radio" class="custom-control-input">
                                                                        <label for="Type_setting_radio"
                                                                            class="custom-control-label">US</label>
                                                                    </div>
                                                                    <div (click)="selectedElement.type = 'NONUS'"
                                                                        class="custom-control custom-radio">
                                                                        <input name="radio" [value]="'NONUS'"
                                                                            [checked]="selectedElement.type === 'NONUS'"
                                                                            id="Type_setting_radio11"
                                                                            name="Type_setting_radio11"
                                                                            type="radio" class="custom-control-input">
                                                                        <label for="Type_setting_radio11"
                                                                            class="custom-control-label">International</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div *ngIf="selectedElement?.numberType?.length > 0"
                                                            class="form-group row">
                                                                <div class="custom-controls-stacked col-6">
                                                                    <div (click)="selectedElement.selectedNumberType = 'Integter'"
                                                                        class="custom-control custom-radio">
                                                                        <input name="radio" [value]="'Integter'"
                                                                            [checked]="selectedElement.selectedNumberType === 'Integter'"
                                                                            id="Integter_Type_setting_radio"
                                                                            name="Integter_Type_setting_radio"
                                                                            type="radio" class="custom-control-input">
                                                                        <label for="Integter_Type_setting_radio"
                                                                            class="custom-control-label">Integter</label>
                                                                    </div>
                                                                    <div (click)="selectedElement.selectedNumberType = 'Decimal'"
                                                                        class="custom-control custom-radio">
                                                                        <input name="radio" [value]="'Decimal'"
                                                                            [checked]="selectedElement.selectedNumberType === 'Decimal'"
                                                                            id="Decimal_Type_setting_radio"
                                                                            name="Decimal_Type_setting_radio"
                                                                            type="radio" class="custom-control-input">
                                                                        <label for="Decimal_Type_setting_radio"
                                                                            class="custom-control-label">Decimal</label>
                                                                    </div>
                                                                    <div (click)="selectedElement.selectedNumberType = 'Percentage'"
                                                                        class="custom-control custom-radio">
                                                                        <input name="radio" [value]="'Percentage'"
                                                                            [checked]="selectedElement.selectedNumberType === 'Percentage'"
                                                                            id="Percentage_Type_setting_radio"
                                                                            name="Percentage_Type_setting_radio"
                                                                            type="radio" class="custom-control-input">
                                                                        <label for="Percentage_Type_setting_radio"
                                                                            class="custom-control-label">Percentage</label>
                                                                    </div>
                                                                </div>
                                                                <div *ngIf="selectedElement.selectedNumberType !== 'Integter'" class="col-6 d-flex align-items-center">
                                                                        <input name="decimal_Items_label_setting" id="decimal_Items_label_setting" type="text"
                                                                        placeholder="Decimal"
                                                                            [(ngModel)]="selectedElement.decimalUpto"
                                                                            class="form-control">
                                                                </div>
                                                        </div>
                                                        <div *ngIf="selectedElement?.validations?.pattern?.length > 0" class="form-group">
                                                            <label for="form-validation">Form Validation</label>
                                                            <div>
                                                                <select id="form-validation" name="form-validation" [(ngModel)]="selectedElement.pattern"
                                                                    class="custom-select">
                                                                    <option *ngFor="let pattern of selectedElement?.validations?.pattern" [value]="pattern.pattern">{{pattern.label}}</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="selectedElement.inputType !== 'date' && selectedElement?.validations?.defaultValue"
                                                            class="form-group">
                                                            <label for="Default Value">Default Value</label>
                                                            <input id="Default Value" name="Default Value"
                                                                placeholder="Default Value"
                                                                [attr.type]="selectedElement.inputType"
                                                                [(ngModel)]="selectedElement.value"
                                                                class="form-control">
                                                        </div>

                                                        <div *ngIf="selectedElement?.validations?.defaultTimeValue"
                                                            class="form-group">
                                                            <label for="Default Value">Default Value</label>
                                                            <div class="input-group">
                                                                <ngb-timepicker [(ngModel)]="selectedElement.value" [seconds]="true"></ngb-timepicker>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="selectedElement.inputType === 'date' && selectedElement?.validations?.defaultValue"
                                                            class="form-group">
                                                            <label for="Default Value">Default Value</label>
                                                                <div class="input-group">
                                                                    <input class="form-control" placeholder="yyyy-mm-dd"
                                                                        name="dp" [(ngModel)]="selectedElement.value"
                                                                        ngbDatepicker #d271="ngbDatepicker">
                                                                    <div class="input-group-append">
                                                                        <div class="input-group-text calendar"
                                                                            (click)="d271.toggle()"><i
                                                                                class="material-icons">date_range</i>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                        </div>
                                                        <div *ngIf="selectedElement?.validations?.collectPayment && !selectedElement.collectPayment"
                                                            (click)="selectedElement.collectPayment =  true" class="form-group">

                                                            <div class="custom-control custom-checkbox custom-control-inline">
                                                            <input type="checkbox" id="collectPaymentCheckbox"
                                                                [checked]="selectedElement?.collectPayment"
                                                                class="custom-control-input">
                                                            <label class="custom-control-label"
                                                                for="collectPaymentCheckbox">Collect Payments</label>
                                                                </div>
                                                        </div>
                                                        <div *ngIf="selectedElement?.validations?.collectPayment && selectedElement.collectPayment"
                                                            (click)="selectedElement.collectPayment =  false" class="form-group">
                                                            <div class="custom-control custom-checkbox custom-control-inline">
                                                            <input type="checkbox" id="collectPaymentCheckbox"
                                                                [checked]="selectedElement?.collectPayment"
                                                                class="custom-control-input">
                                                            <label class="custom-control-label"
                                                                for="collectPaymentCheckbox">Collect Payments</label>
                                                         </div>
                                                    </div>
                                                        <div *ngIf="selectedElement?.validations?.options && !selectedElement?.collectPayment"
                                                            class="radio-opt">

                                                            <div class="col-12"><label
                                                                    for="Default Value">Options</label>
                                                                </div>
                                                            <div *ngFor="let val of selectedElement?.options; let i =index; trackBy:trackByFn"
                                                                class="row">
                                                                <div class="col-md-8">
                                                                    <div class="row form-group ">
                                                                        <div class="col-md-2">
                                                                            <div class="custom-control custom-checkbox custom-control-inline">
                                                                    <input type="checkbox"
                                                                        id="default_radio_selection_{{selectedElement.uiIndexId}}_{{i*i}}"
                                                                        name="default_radio_selection_{{selectedElement.uiIndexId}}_{{i*i}}"
                                                                        (click)="selectedElement.value = selectedElement.options[i].label"
                                                                        [checked]="selectedElement?.value?.includes(selectedElement.options[i].label)"
                                                                        [value]="selectedElement.options[i].label"
                                                                        class="custom-control-input">
                                                                    <label class="custom-control-label"
                                                                        for="default_radio_selection_{{selectedElement.uiIndexId}}_{{i*i}}"></label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-10">
                                                                    <input type="text"
                                                                        [(ngModel)]="selectedElement.options[i].label"
                                                                        placeholder="Add Option Name"
                                                                        class="form-control">
                                                                    </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <button (click)="remove(i)"
                                                                        class="btn option-btn border btn-sm rounded bg-white p-0 mr-1"><i
                                                                            class="material-icons">remove</i></button>
                                                                    <button
                                                                        class="btn option-btn border btn-sm rounded bg-white p-0"
                                                                        (click)="selectedElement.options.push({label: '', payment: 0})"><i
                                                                            class="material-icons">add</i></button>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div *ngIf="selectedElement?.validations?.options && selectedElement?.collectPayment"
                                                            class="radio-opt">

                                                            <div class="col-12"><label
                                                                    for="Default Value">Options</label></div>
                                                            <div *ngFor="let val of selectedElement?.options; let i =index; trackBy:trackByFn"
                                                                class="row">
                                                                <div class="form-group col-md-6">
                                                                    <div class="row">
                                                                        <div class="col-md-2">
                                                                    <div class="custom-control custom-checkbox custom-control-inline">
                                                                    <input type="checkbox"
                                                                        id="default_radio_selection_{{selectedElement.uiIndexId}}_{{i*i}}"
                                                                        name="default_radio_selection_{{selectedElement.uiIndexId}}_{{i*i}}"
                                                                        (click)="selectDefault(selectedElement, i)"
                                                                        [checked]="selectedElement?.value?.includes(selectedElement.options[i].label)"
                                                                        [value]="selectedElement.options[i].label"
                                                                        class="custom-control-input">
                                                                    <label class="custom-control-label"
                                                                        for="default_radio_selection_{{selectedElement.uiIndexId}}_{{i*i}}"></label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-10">
                                                                    <input type="text"
                                                                        [(ngModel)]="selectedElement.options[i].label"
                                                                        class="form-control">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group col-md-3">
                                                                    <input type="number"
                                                                        [(ngModel)]="selectedElement.options[i].payment"
                                                                        placeholder="$" class="form-control">
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <button (click)="remove(i)"
                                                                        class="btn option-btn border btn-sm rounded bg-white p-0 mr-1"><i
                                                                            class="material-icons">remove</i></button>
                                                                    <button
                                                                        class="btn option-btn border btn-sm rounded bg-white p-0"
                                                                        (click)="selectedElement.options.push({label: 'Option 1', payment: 0})"><i
                                                                            class="material-icons">add</i></button>
                                                                </div>

                                                            </div>
                                                            <!--   <div class="row">
                                                                <div class="col-sm">
                                                                    <button class="btn btn-success" (click)="selectedElement.options.push('')">Add</button>
                                                                </div>
                                                            </div> -->
                                                        </div>

                                                        <div *ngIf="selectedElement?.validations?.ratingOptions"
                                                            class="rating-properties-wrap">
                                                            <div class="form-group">
                                                                <label for="Default Value">Rating</label>

                                                                <select
                                                                    [(ngModel)]="selectedElement.selectedRatingScale"
                                                                    class="form-control">
                                                                    <option
                                                                        *ngFor="let key of selectedElement?.ratingScale | keyvalue"
                                                                        [value]="key.key">{{key.key}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="form-group row">
                                                                <ng-container
                                                                    *ngIf="selectedElement.selectedRatingScale === 'Custom'">
                                                                    <div *ngFor="let item of selectedElement.ratingScale[selectedElement.selectedRatingScale]; let ii = index"
                                                                        class="col-md-12 mb-2">
                                                                        <input type="text"
                                                                            [value]="selectedElement.ratingScale[selectedElement.selectedRatingScale][ii]"
                                                                            class="form-control">

                                                                    </div>
                                                                </ng-container>
                                                            </div>
                                                            <div class="form-group">
                                                                <div *ngFor="let key of selectedElement?.ratingOptions"
                                                                    class="row my-2">
                                                                    <div class="col-8"> <input type="text"
                                                                            [(ngModel)]="key.label"
                                                                            class="form-control cursor-pointer"></div>
                                                                    <div class="col-4">
                                                                        <button
                                                                            (click)="removeObj(key.key, selectedElement, 'ratingOptions')"
                                                                            class="btn option-btn border btn-sm rounded bg-white p-0 mr-1"><i
                                                                                class="material-icons">remove</i></button>
                                                                        <button
                                                                            (click)="selectedElement.ratingOptions.push({label :'Option 1',value: ''})"
                                                                            class="btn option-btn border btn-sm rounded bg-white p-0"><i
                                                                                class="material-icons">add</i></button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div *ngIf="selectedElement.inputType === 'toggle' && selectedElement?.collectPayment" class="form-group">
                                                                <div class="form-group">
                                                                <label>Add Price</label>
                                                                <div class="row">
                                                                    <div class="form-group col">
                                                                        <input name="true_label_setting" id="collect_true_label_setting" type="text"
                                                                        placeholder="Price"
                                                                            [(ngModel)]="selectedElement.collectAmount"
                                                                            class="form-control">
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>

                                                        <div *ngIf="selectedElement?.validations?.toggleDefaultOptions"
                                                            class="rating-properties-wrap">
                                                            <div class="form-group">
                                                                <label for="Default Value">Pre Defined Labels</label>

                                                                <select
                                                                    [(ngModel)]="selectedElement.selectLabel"
                                                                    class="form-control">
                                                                    <option
                                                                        *ngFor="let key of selectedElement?.validations?.toggleDefaultOptions | keyvalue"
                                                                        [value]="key.key">{{key.key}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="form-group">
                                                                <ng-container
                                                                    *ngIf="selectedElement.selectLabel === 'Others'">
                                                                    <div class="form-group">
                                                                    <label>Add Label</label>
                                                                    <div class="row">
                                                                        <div class="form-group col">
                                                                            <input name="true_label_setting" id="true_label_setting" type="text"
                                                                            placeholder="False"
                                                                                [(ngModel)]="selectedElement?.validations?.toggleDefaultOptions?.[selectedElement?.selectLabel].false"
                                                                                class="form-control">
                                                                        </div>
                                                                        <div class="form-group col">
                                                                            <input id="true_label_setting_max" name="true_label_setting_max" type="text"
                                                                            placeholder="True"
                                                                                [(ngModel)]="selectedElement?.validations?.toggleDefaultOptions?.[selectedElement?.selectLabel].true"
                                                                                class="form-control">
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                </ng-container>
                                                            </div>
                                                        </div>
                                                        <ng-container
                                                            *ngIf="selectedElement?.selectedRatingScale === 'Custom'">
                                                            <div
                                                                *ngFor="let item of selectedElement.ratingScale[selectedElement.selectedRatingScale]; let ii = index">
                                                                <input type="text"
                                                                    [value]="selectedElement.ratingScale[selectedElement.selectedRatingScale][ii]">

                                                            </div>
                                                        </ng-container>

                                                        <div class="form-group"
                                                            *ngIf="selectedElement?.validations?.range">
                                                            <label>Range</label>
                                                            <div class="row">
                                                                <div class="form-group col">
                                                                    <label for="min">Min</label>
                                                                    <input name="min" id="min" type="number"
                                                                        [(ngModel)]="selectedElement.minVal"
                                                                        class="form-control">
                                                                </div>
                                                                <div class="form-group col">
                                                                    <label for="max">Max</label>
                                                                    <input id="max" name="max" type="number"
                                                                        [(ngModel)]="selectedElement.maxVal"
                                                                        class="form-control">
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- <div class="row form-group" *ngIf="selectedElement?.validations?.range">
                                                                <label>Range</label>
                                                                <div class="form-group col">
                                                                    <label for="min">Min</label>
                                                                    <input name="min" id="min" type="number" [(ngModel)]="selectedElement.minVal" class="form-control">
                                                                </div>

                                                                <div class="form-group col">
                                                                    <label for="max">Max</label>
                                                                    <input id="max" name="max" type="number" (ngModel)]="selectedElement.maxVal" class="form-control">
                                                                </div>
                                                            </div> -->



                                                        <div *ngIf="selectedElement?.validations?.dateRange" class="form-date-range-group"
                                                            >

                                                            <label>Range</label>
                                                            <div class="form-group">
                                                                <label for="min">Min</label>
                                                                <div class="input-group">
                                                                    <input class="form-control" placeholder="yyyy-mm-dd"
                                                                        name="dp" [(ngModel)]="selectedElement.minVal"
                                                                        ngbDatepicker #d1="ngbDatepicker">
                                                                    <div class="input-group-append">
                                                                        <div class="input-group-text calendar"
                                                                            (click)="d1.toggle()"><i
                                                                                class="material-icons">date_range</i>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="min">Max</label>
                                                                <div class="input-group">
                                                                    <input class="form-control" placeholder="yyyy-mm-dd"
                                                                        name="dp" [(ngModel)]="selectedElement.maxVal"
                                                                        ngbDatepicker #d="ngbDatepicker">
                                                                    <div class="input-group-append">
                                                                        <div class="input-group-text calendar"
                                                                            (click)="d.toggle()" type="button"><i
                                                                                class="material-icons">date_range</i>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        </div>
                                                        <ng-container *ngIf="selectedElement?.validations?.pageBreakName">
                                                            <div class="form-group">
                                                                <label for="text">Page Name</label>
                                                                <input id="text" name="text"
                                                                    [(ngModel)]="selectedElement.value"
                                                                    placeholder="Untitled" type="text"
                                                                    class="form-control">
                                                            </div>
                                                        </ng-container>

                                                        <ng-container
                                                            *ngIf="selectedElement?.validations?.contentEditor">
                                                            <div class="form-group">
                                                                <label for="text">Edit content</label>
                                                                <angular-editor [placeholder]="'Enter text here...'"
                                                                    [(ngModel)]="selectedElement.value">
                                                                </angular-editor>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngIf="selectedElement?.inputType === 'dropdown'">
                                                            <div class="form-group">
                                                                <label for="text">File Size Limit</label>
                                                                <input
                                                                (change)="onFileChange($event, selectedElement)"
                                                                    placeholder="Untitled" type="file"
                                                                    class="form-control">
                                                            </div>
                                                        </ng-container>

                                                        <div *ngIf="selectedElement?.validations?.help"
                                                            class="form-group">
                                                            <label for="Help Text">Help Text</label>
                                                            <textarea [(ngModel)]="selectedElement.helpText"
                                                                id="Help Text" name="Help Text" cols="40" rows="5"
                                                                class="form-control"></textarea>
                                                        </div>
                                                        <div *ngIf="selectedElement?.validations?.typeOfAddress">

                                                            <div>
                                                                <div class="custom-control custom-radio"
                                                                    (click)="selectedElement.selectedType = 'US'; selectedElement.children = selectedElement.validations.typeOfAddress.US;">
                                                                    <input name="radio"
                                                                        [checked]="selectedElement.selectedType === 'US'"
                                                                        [value]="'US'" id="radio_US" type="radio"
                                                                        class="custom-control-input">
                                                                    <label for="radio_card"
                                                                        class="custom-control-label">US</label>
                                                                </div>

                                                                <div class="custom-control custom-radio"
                                                                    (click)="selectedElement.selectedType = 'NONUS'; selectedElement.children = selectedElement.validations.typeOfAddress.NONUS;">
                                                                    <input name="radio"
                                                                        [checked]="selectedElement.selectedType === 'NONUS'"
                                                                        [value]="'NONUS'" id="radio_NONUS" type="radio"
                                                                        class="custom-control-input">
                                                                    <label for="radio_cash"
                                                                        class="custom-control-label">International</label>
                                                                </div>
                                                            </div>


                                                            <div class="mt-5" *ngIf="selectedElement.inputType === 'addressSection'">
                                                                <ng-container
                                                                    *ngFor="let addElement of selectedElement.children; let eleIndex = index; trackBy:trackByFn">
                                                                    <div
                                                                        class="custom-control custom-checkbox row d-flex p-2">
                                                                        <div class="col-3">
                                                                            <input type="checkbox"
                                                                                id="eleIndex_{{eleIndex}}"
                                                                                [checked]="!addElement.disabled"
                                                                                (click)="addElement.disabled = !addElement.disabled"
                                                                                class="custom-control-input">
                                                                            <label class="custom-control-label"
                                                                                for="eleIndex_{{eleIndex}}">{{addElement.placeholder}}</label>
                                                                        </div>
                                                                        <div class="col-9">
                                                                            <input class="form-control mr-1"
                                                                                placeholder="{{addElement.name}}"
                                                                                [(ngModel)]="selectedElement.children[eleIndex].value"
                                                                                type="text">

                                                                        </div>

                                                                    </div>
                                                                </ng-container>


                                                            </div>

                                                        </div>

                                                        <ng-container *ngIf="selectedElement.inputType === 'fileupload'" >
                                                            <div class="form-group">
                                                                <label for="text">File Size Limit</label>
                                                                <input id="text" name="text"
                                                                    [(ngModel)]="selectedElement.fileSize"
                                                                    placeholder="Untitled" type="number"
                                                                    class="form-control">
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="text">Number of Files</label>
                                                                <input id="text" name="text"
                                                                    [(ngModel)]="selectedElement.numberOfFile"
                                                                    placeholder="Untitled" type="number"
                                                                    class="form-control">
                                                            </div>
                                                        </ng-container>


                                                        <div class="mt-5" *ngIf="selectedElement.inputType === 'nameSection'">
                                                            <ng-container
                                                                *ngFor="let addElement of selectedElement.children; let eleIndex = index; trackBy:trackByFn">
                                                                <div *ngIf="addElement.editable"
                                                                    class="col-12 form-group">
                                                                        <div class="custom-control custom-checkbox custom-control-inline">
                                                                        <input type="checkbox"
                                                                            id="name_eleIndex_{{eleIndex}}_{{eleIndex*3}}"
                                                                            name="name_eleIndex_{{eleIndex}}_{{eleIndex*3}}"
                                                                            [value]="addElement.disabled"
                                                                            [checked]="!selectedElement.children[eleIndex].disabled"
                                                                            (click)="addElement.disabled = !addElement.disabled"
                                                                            class="custom-control-input">
                                                                        <label class="custom-control-label"
                                                                            for="name_eleIndex_{{eleIndex}}_{{eleIndex*3}}">{{addElement.placeholder}} {{!addElement.disabled}}</label>
                                                                        </div>

                                                                </div>
                                                            </ng-container>
                                                        </div>
                                                        <div *ngIf="selectedElement?.validations?.addColumns">

                                                            Add Columns
                                                            <div class="d-flex form-group">
                                                                <select class="form-control mr-2" #ssss
                                                                    [(ngModel)]="selectColElement">
                                                                    <option
                                                                        *ngFor="let elements of selectedElement?.validations?.addColumns; let elementIndex = index"
                                                                        [value]="elementIndex">{{elements.name}}
                                                                    </option>
                                                                </select>
                                                                <button [disabled]="ssss.value === ''"
                                                                    class="btn option-btn border btn-sm rounded bg-white p-1 mr-1"
                                                                    (click)="addCol(ssss.value); ssss.value = ''"><i
                                                                        class="material-icons">add</i></button>
                                                            </div>

                                                            <div class="d-flex form-group"
                                                                *ngFor="let item of selectedElement?.columns; let colId = index">
                                                                <input class="form-control mr-1" type="text"
                                                                    [(ngModel)]="selectedElement.columns[colId].name">
                                                                <button
                                                                    class="btn option-btn border btn-sm rounded bg-white p-1 mr-1"
                                                                    (click)="selectedElement.columns.splice(colId, 1)"><i
                                                                        class="material-icons">remove</i></button>

                                                            </div>
                                                        </div>
                                                        <div
                                                            *ngIf="showPaymentFields() && (selectedElement?.inputType === 'payment' || selectedElement?.inputType ===  'paymentSection')">
                                                            <label>Payment Setting</label>
                                                            <ng-container *ngIf="selectedElement?.inputType ===  'paymentSection'">
                                                                <div class="p-1 mr-1">

                                                                    <div class="d-flex form-group"  *ngIf="paymentSetting?.extraBill?.length === 0">
                                                                <input class="form-control mr-1" type="text"
                                                                    [(ngModel)]="extraBillModel.name">
                                                                <input class="form-control mr-1" type="text"
                                                                    [(ngModel)]="extraBillModel.value">
                                                                <select class="form-control mr-2"
                                                                    [(ngModel)]="extraBillModel.type">
                                                                    <option [value]="'dollar'">Amount</option>
                                                                    <option [value]="'perentage'">Percentage</option>
                                                                </select>
                                                                <button
                                                                    class="btn option-btn border btn-sm rounded bg-white p-1 mr-1"
                                                                    (click)="paymentSetting?.extraBill.push({value: extraBillModel.value, type: extraBillModel.type, name: extraBillModel.name})"><i
                                                                        class="material-icons">add</i></button>
                                                                <!-- <button
                                                                    class="btn option-btn border btn-sm rounded p-1 mr-1"
                                                                    (click)="paymentSetting?.extraBill.splice(i, 1)"><i
                                                                        class="material-icons">remove</i></button> -->
                                                            </div>
                                                            </div>

                                                            <div class="d-flex form-group"
                                                                *ngFor="let item of paymentSetting?.extraBill; let i = index">
                                                                <input class="form-control mr-1" type="text"
                                                                    [(ngModel)]="paymentSetting?.extraBill[i].name">
                                                                <input class="form-control mr-1" type="text"
                                                                    [(ngModel)]="paymentSetting?.extraBill[i].value">
                                                                <select class="form-control mr-2"
                                                                    [(ngModel)]="paymentSetting?.extraBill[i].type">
                                                                    <option [value]="'dollar'">Amount</option>
                                                                    <option [value]="'perentage'">Percentage</option>
                                                                </select>
                                                                <button
                                                                    class="btn option-btn border btn-sm rounded bg-white p-1 mr-1"
                                                                    (click)="paymentSetting?.extraBill.push({value: null, type: 'dollar', name: 'Additional'})"><i
                                                                        class="material-icons">add</i></button>
                                                                <button
                                                                    class="btn option-btn border btn-sm rounded bg-white p-1 mr-1"
                                                                    (click)="paymentSetting?.extraBill.splice(i, 1)"><i
                                                                        class="material-icons">remove</i></button>
                                                            </div>
                                                        </ng-container>


                                                            <div *ngIf="selectedElement?.inputType ===  'paymentSection'"
                                                                class="custom-control custom-checkbox">
                                                                <input type="checkbox" id="showSubTotal"
                                                                    class="custom-control-input"
                                                                    [(ngModel)]="paymentSetting.showSubTotal">
                                                                <label class="custom-control-label"
                                                                    for="showSubTotal">Sub Total</label>
                                                            </div>
                                                            <div *ngIf="selectedElement?.inputType ===  'paymentSection'"
                                                                class="custom-control custom-checkbox">
                                                                <input type="checkbox" id="showLineItems"
                                                                    class="custom-control-input"
                                                                    [(ngModel)]="paymentSetting.showLineItems">
                                                                <label class="custom-control-label"
                                                                    for="showLineItems">Show LineItems</label>

                                                            </div>
                                                            <div *ngIf="selectedElement?.inputType ===  'paymentSection'"
                                                                class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input"
                                                                    id="mapBillingFields"
                                                                    [(ngModel)]="paymentSetting.mapBillingFields">
                                                                <label class="custom-control-label"
                                                                    for="mapBillingFields"> Map Billing
                                                                    fields</label>
                                                            </div>
                                                            <div *ngIf="paymentSetting.mapBillingFields">
                                                                <div class="form-group">



                                                                    <label>Name</label>
                                                                    <select class="form-control"
                                                                        [(ngModel)]="paymentSetting.selectedName">
                                                                        <option *ngFor="let field of nameField"
                                                                            [value]="field.name">
                                                                            {{field.name}}</option>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group">



                                                                    <label>Address</label>
                                                                    <select class="form-control"
                                                                        [(ngModel)]="paymentSetting.selectedAddress">
                                                                        <option *ngFor="let field of addressField"
                                                                            [value]="field.name">
                                                                            {{field.name}}</option>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group">



                                                                    <label>Email</label>
                                                                    <select class="form-control"
                                                                        [(ngModel)]="paymentSetting.selectedEmail">
                                                                        <option *ngFor="let field of emailField"
                                                                            [value]="field.name">
                                                                            {{field.name}}</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="p-1 mr-1">
                                                                <button
                                                                    class="btn option-btn border btn-sm rounded p-1 mr-1"
                                                                    (click)="addNewStripeAccount()"><i
                                                                        class="material-icons">add</i>Add
                                                                    Account</button>
                                                            </div>

                                                            <div class="form-group">



                                                                <label>Accounts</label>
                                                                <select class="form-control"
                                                                    [(ngModel)]="paymentSetting.stripeAccount">
                                                                    <option *ngFor="let account of stripeAccounts"
                                                                        [value]="account.accountName">
                                                                        {{account.accountName}}</option>
                                                                </select>
                                                            </div>
                                                        </div>




                                                    </div>

                                                </div>

                                                <div
                                                    class="form-field-control form-conditional-properties bg-white mb-2 pb-5">
                                                    <div class="col-md-12">
                                                        <h4 class="text-center py-2 mb-2">Conditional Properties</h4>
                                                        <div *ngIf="selectedElement?.validations?.view"
                                                            class="form-group">
                                                            <label class=" col-form-label">Show This Field</label>
                                                            <div class="field-visibility-radio">
                                                                <div class="btn-group btn-group-toggle" ngbRadioGroup
                                                                    name="radioBasic"
                                                                    [(ngModel)]="selectedElement.view">
                                                                    <ng-container
                                                                        *ngFor="let tab of selectedElement?.validations?.view.options">
                                                                        <label ngbButtonLabel
                                                                            class="btn border bf-radio-group-btn">
                                                                            <input ngbButton
                                                                                (click)="openModal(selectedElement, tab.value, 'dependUpon')"
                                                                                type="radio" [value]="tab.value">
                                                                            {{tab.label}}
                                                                        </label>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                            <hr>
                                                            <!-- <pre>{{model}}</pre> -->
                                                        </div>


                                                        <div *ngIf="selectedElement?.validations?.required"
                                                            class="form-group">
                                                            <label class=" col-form-label">Require This Field</label>
                                                            <div class="field-visibility-radio">
                                                                <div class="btn-group btn-group-toggle" ngbRadioGroup
                                                                    name="radioBasic"
                                                                    [(ngModel)]="selectedElement.isRequired">
                                                                    <ng-container
                                                                        *ngFor="let tab of selectedElement?.validations?.required.options">
                                                                        <label ngbButtonLabel
                                                                            class="btn border bf-radio-group-btn">
                                                                            <input ngbButton
                                                                                (click)="openModal(selectedElement, tab.value, 'reqDependUpOn')"
                                                                                type="radio" [value]="tab.value">
                                                                            {{tab.label}}
                                                                        </label>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                            <hr>
                                                            <!-- <pre>{{model}}</pre> -->
                                                        </div>

                                                    </div>
                                                </div>

                                                <!-- <pre><code>{{targetBuilderTools | json}}</code></pre> -->



                                            </ng-template>
                                        </li>
                                    </ul>
                                    <div class="overflow-auto vh-100 draggable-fields-wrap">
                                        <div [ngbNavOutlet]="nav" class="mt-2"></div>

                                    </div>
                                </div>
                                <div class="col-md-9 col-lg main">
                                    <div
                                        class="builder-target build-container build-droppable-tool bg-white m-3 p-3 border-top border-5 border-bf overflow-auto vh-100">

                                        <div class="form-build-head border-bottom mb-3">
                                            <h4 class="text-center form-heading mb-1">{{builderObj.name}}</h4>
                                            <p class="text-center text-muted"> {{builderObj.description}}</p>

                                        </div>
                                        <ngx-dnd-container class="root-container" [model]="targetBuilderTools"
                                            dropZone="builder-target" [removeOnSpill]="false"
                                            [droppableItemClass]="droppableItemClass" (drop)="drop($event)"
                                            direction="mixed" [moves]="abc" (over)="log1($event)">

                                            <ng-template let-model="model" let-index="index" let-template="template"
                                                class="">


                                                <div [ngSwitch]="model.inputType" class="p-2 builder-dropped-field">

                                                    <div class="popover-controller">
                                                        <span class="material-icons popover-controller-icon"
                                                            role="button" (click)="selectedElement = model; selectedElement.viewOptions = selectedElement?.viewOptions ? false : true;">
                                                            more_vert
                                                        </span>

                                                        <div class="popover bs-popover-bottom field-popover-wrap"
                                                        *ngIf="selectedElement?.viewOptions && selectedElement?.uiIndexId === model.uiIndexId">
                                                        <div class="arrow"></div>
                                                        <div class="popover-body">
                                                            <div class="row my-2">
                                                                <div class="col-md-6"
                                                                    (click)="duplicate(model.uiIndexId)">
                                                                    <div class="field-action d-flex align-items-center rounded py-2"
                                                                        role="button">
                                                                        <i class="material-icons">content_copy</i>
                                                                        <span>Duplicate</span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6" (click)="delete(model)">

                                                                    <div class="field-action d-flex align-items-center rounded py-2"
                                                                        role="button">
                                                                        <i class="material-icons">delete</i>
                                                                        <span>Delete</span>
                                                                    </div>

                                                                </div>
                                                            </div>


                                                            <div class="row my-2">
                                                                <div class="col-md-6"
                                                                    [ngClass]="{'disbaled': model.size === 'small'}"
                                                                    (click)="makeSmaller(model)">
                                                                    <div class="field-action d-flex align-items-center rounded py-2"
                                                                        role="button">
                                                                        <i class="material-icons">arrow_back</i>
                                                                        <span>Make Smaller</span>
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-6"
                                                                    [ngClass]="{'disbaled': model.size === 'extra-large'}"
                                                                    (click)="makeLarger(model)">
                                                                    <div class="field-action d-flex align-items-center rounded py-2"
                                                                        role="button">
                                                                        <i class="material-icons">arrow_forward</i>
                                                                        <span>Make Bigger</span>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>
                                                    </div>


                                                    <div *ngSwitchCase="'section'"
                                                        (click)="sectionClicked($event, model, template); selectedElement.viewOptions = false;"
                                                        class="mjui">
                                                        <div class="shadow">
                                                            {{model.name}}
                                                            <ngx-dnd-container *ngIf="!viewExportedView"
                                                                dropZone="builder-target" [model]="model.children"
                                                                [removeOnSpill]="false" [template]="template"
                                                                [droppableItemClass]="droppableItemClass"
                                                                (drag)="log($event)" (drop)="drop($event)"
                                                                (over)="log($event)" (out)="log($event)"
                                                                (remove)="log($event)" (cancel)="log($event)"
                                                                direction="mixed">
                                                            </ngx-dnd-container>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'addressSection'"
                                                        (click)="sectionClicked($event, model, template); selectedElement.viewOptions = false;"
                                                        class="mjui">
                                                        <div class="row p-2">
                                                            <ng-container *ngFor="let item of model.children; let i = index">
                                                                <div *ngIf="i <= 1 && !item.disabled" class="{{item.class}}">
                                                                    <input type="text" class="form-control" [(ngModel)]="model.children[i].value"
                                                                        [attr.placeholder]="item.placeholder" autocomplete="off">
                                                                </div>
                                                                <div *ngIf="i > 1 && !item.disabled"
                                                                    class="col-{{12/(model.children.length - 2)}} p-2">
                                                                    <input type="text" class="form-control" [(ngModel)]="model.children[i].value"
                                                                        [attr.placeholder]="item.placeholder" autocomplete="off">
                                                                </div>
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'nameSection'"
                                                        (click)="clicked($event, model, template); selectedElement.viewOptions = false;"
                                                        class="mjui">
                                                        <div class="row p-2">
                                                            <ng-container *ngFor="let item of model.children; let i = index">
                                                                <div *ngIf="!item.disabled" class="{{item.class}}">
                                                                    <input type="text" class="form-control" [(ngModel)]="model.children[i].value"
                                                                        [attr.placeholder]="item.placeholder" autocomplete="off">
                                                                </div>
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'toggle'"
                                                        (click)="clicked($event, model, template); selectedElement.viewOptions = false;"
                                                        class="mjui">
                                                        {{model.name}}
                                                        <div class="row p-2">
                                                            <label class="mr-2" >{{model.validations?.toggleDefaultOptions?.[model.selectLabel].false}}</label>
                                                            <div class="custom-control custom-switch">
                                                                <input type="checkbox" id="switchToggle{{model.uiIndexId}}_noncheckbox" class="custom-control-input" >
                                                                <label class="custom-control-label" for="switchToggle{{model.uiIndexId}}_noncheckbox">{{model.validations?.toggleDefaultOptions?.[model.selectLabel].true}}</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'levelSection'"
                                                        (click)="sectionClicked($event, model, template)" class="mjui">
                                                        <div class="shadow">
                                                            {{model.name}}
                                                            <ngx-dnd-container *ngIf="!viewExportedView"
                                                                dropZone="builder-target" [model]="model.children"
                                                                [removeOnSpill]="false" [template]="template"
                                                                [droppableItemClass]="droppableItemClass"
                                                                (drag)="log($event)" (drop)="drop($event)"
                                                                (over)="log($event)" (out)="log($event)"
                                                                (remove)="log($event)" (cancel)="log($event)"
                                                                direction="mixed">
                                                            </ngx-dnd-container>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'content'"
                                                        (click)="sectionClicked($event, model, template) ;selectedElement.viewOptions = false;"
                                                        class="mjui">
                                                        <div class="shadow">
                                                            {{model.name}}
                                                            <div [innerHTML]="model.value"></div>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'table'"
                                                        (click)="clicked($event, model, template)" class="border">
                                                        <div class="col-md-12">
                                                            <div class="text-center d-flex flex-column align-items-center pt-3"><span class="material-icons"> add </span>Add columns </div>
                                                            <table class="table mt-3  text-center border" id="table-id"
                                                                data-toggle="table" data-search="true"
                                                                data-filter-control="true" data-show-export="true"
                                                                data-show-refresh="true" data-show-toggle="true"
                                                                data-pagination="true" data-toolbar="#toolbar">
                                                                <thead class="thead-light">
                                                                    <tr>
                                                                        <ng-container
                                                                            *ngFor="let item of model.columns">
                                                                            <th *ngIf="item.view" data-field="prenom"
                                                                                data-filter-control="input"
                                                                                data-sortable="true"
                                                                                (click)="clicked($event, item, template)">
                                                                                {{item.name}}</th>
                                                                        </ng-container>


                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <ng-container>
                                                                        <tr *ngIf="model.columns?.length > 0">
                                                                            <ng-container
                                                                                *ngFor="let col of model.columns; let colIndex = index">
                                                                                <td>
                                                                                    <div *ngIf="col.inputType ==='phoneNumber'"
                                                                                        class="page-break target-droppable">
                                                                                        <input type="tel"
                                                                                            class="form-control"
                                                                                            id="table_phonenumber_{{colIndex}}_{{model.uiIndexId}}"
                                                                                            [(ngModel)]="col.value"
                                                                                            name="tel" #name="ngModel"
                                                                                            [attr.maxlength]="col.maxVal"
                                                                                            [attr.minlength]="col.minVal"
                                                                                            [attr.placeholder]="col.placeholder"
                                                                                            autocomplete="off">
                                                                                    </div>
                                                                                    <div *ngIf="col.inputType ==='dropdown'"
                                                                                        class="page-break target-droppable">
                                                                                        <select [(ngModel)]="col.value"
                                                                                            class="custom-select">
                                                                                            <option
                                                                                                *ngFor="let option of col.options"
                                                                                                [value]="option.label">
                                                                                                {{option.label}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div *ngIf="col.inputType ==='number'"
                                                                                        class="page-break target-droppable">
                                                                                        <input type="number"
                                                                                            class="form-control"
                                                                                            id="table_number_{{colIndex}}"
                                                                                            [(ngModel)]="col.value"
                                                                                            name="tel" #name="ngModel"
                                                                                            [attr.maxlength]="col.maxVal"
                                                                                            [attr.minlength]="col.minVal"
                                                                                            [attr.placeholder]="col.placeholder"
                                                                                            autocomplete="off">
                                                                                    </div>
                                                                                    <div *ngIf="col.inputType ==='email'"
                                                                                        class="page-break target-droppable">
                                                                                        <input type="email"
                                                                                            class="form-control"
                                                                                            id="table_email"
                                                                                            [(ngModel)]="col.value"
                                                                                            name="email" #name="ngModel"
                                                                                            [attr.maxlength]="col.maxVal"
                                                                                            [attr.minlength]="col.minVal"
                                                                                            [attr.placeholder]="col.placeholder"
                                                                                            autocomplete="off">
                                                                                    </div>
                                                                                    <div *ngIf="col.inputType==='website'"
                                                                                        class="page-break target-droppable">
                                                                                        <input type="text"
                                                                                            class="form-control"
                                                                                            id="table_website"
                                                                                            [(ngModel)]="col.value"
                                                                                            name="website"
                                                                                            #name="ngModel"
                                                                                            [attr.maxlength]="col.maxVal"
                                                                                            [attr.minlength]="col.minVal"
                                                                                            [attr.placeholder]="col.placeholder"
                                                                                            autocomplete="off">

                                                                                    </div>
                                                                                    <div *ngIf="col.inputType==='date'"
                                                                                        class="page-break target-droppable">
                                                                                        <div class="input-group">
                                                                                            <input class="form-control"
                                                                                                [minDate]="col.minVal"
                                                                                                [maxDate]="col.maxVal"
                                                                                                placeholder="yyyy-mm-dd"
                                                                                                name="dp"
                                                                                                [(ngModel)]="col.value"
                                                                                                ngbDatepicker
                                                                                                #d="ngbDatepicker">
                                                                                            <div
                                                                                                class="input-group-append">
                                                                                                <div class="input-group-text calendar"
                                                                                                    (click)="d.toggle()"
                                                                                                    type="button"><i
                                                                                                        class="material-icons">date_range</i>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngIf="col.inputType==='string'"
                                                                                        class="page-break target-droppable">
                                                                                        <input type="text"
                                                                                            class="form-control"
                                                                                            id="text"
                                                                                            [(ngModel)]="col.value"
                                                                                            name="website"
                                                                                            #name="ngModel"
                                                                                            [attr.maxlength]="col.maxVal"
                                                                                            [attr.minlength]="col.minVal"
                                                                                            [attr.placeholder]="col.placeholder"
                                                                                            autocomplete="off">

                                                                                    </div>
                                                                                    <div *ngIf="col.inputType==='text'"
                                                                                        class="page-break target-droppable">
                                                                                        <input type="text"
                                                                                            class="form-control"
                                                                                            id="text"
                                                                                            [(ngModel)]="col.value"
                                                                                            name="website"
                                                                                            #name="ngModel"
                                                                                            [attr.maxlength]="col.maxVal"
                                                                                            [attr.minlength]="col.minVal"
                                                                                            [attr.placeholder]="col.placeholder"
                                                                                            autocomplete="off">

                                                                                    </div>
                                                                                    <div *ngIf="col.inputType==='payment'"
                                                                                        style="pointer-events: none;"
                                                                                        class="page-break target-droppable">
                                                                                        <input type="text"
                                                                                            class="form-control"
                                                                                            id="text"
                                                                                            [(ngModel)]="col.value"
                                                                                            name="website"
                                                                                            #name="ngModel"
                                                                                            [attr.maxlength]="col.maxVal"
                                                                                            [attr.minlength]="col.minVal"
                                                                                            [attr.placeholder]="col.placeholder"
                                                                                            autocomplete="off">

                                                                                    </div>
                                                                                    <div *ngIf="col.inputType==='currency'"
                                                                                        class="page-break target-droppable">
                                                                                        <input type="text"
                                                                                            class="form-control"
                                                                                            id="text"
                                                                                            [(ngModel)]="col.value"
                                                                                            name="website"
                                                                                            #name="ngModel"
                                                                                            [attr.maxlength]="col.maxVal"
                                                                                            [attr.minlength]="col.minVal"
                                                                                            [attr.placeholder]="col.placeholder"
                                                                                            autocomplete="off">

                                                                                    </div>
                                                                                    <!-- <div *ngSwitchDefault (click)="clicked($event, model, template)">
                                                                                            <label>{{model?.name}}</label>
                                                                                            <app-ui-input [model]="model"
                                                                                                [targetBuilderTools]="targetBuilderTools"
                                                                                                *ngIf="!model?.dependUpon || checkForDependency(model) ">
                                                                                            </app-ui-input>

                                                                                        </div> -->
                                                                                </td>
                                                                            </ng-container>


                                                                        </tr>
                                                                    </ng-container>


                                                                </tbody>

                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'repeatSection'"
                                                        (click)="sectionClicked($event, model, template)">
                                                        <div class="form-group repeatSection-wrap">
                                                            <label>{{model.name}}</label>

                                                            <div class="mt-2"  (click)="clicked($event, model, template)" *ngFor="let rSection of model.childSection">
                                                                <ngx-dnd-container *ngIf="!viewExportedView"
                                                                    dropZone="builder-target"
                                                                    [model]="rSection.children" [removeOnSpill]="false"
                                                                    [template]="template"
                                                                    [droppableItemClass]="droppableItemClass"
                                                                    direction="mixed">
                                                                </ngx-dnd-container>
                                                            </div>
                                                            <button  class="btn option-btn border btn-sm rounded p-1 my-2 bg-white"
                                                            (click)="addSection(model)">
                                                                <i class="material-icons">add</i></button>

                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'fileupload'">
                                                        <div class="">
                                                            <label>File Upload</label>
                                                            <input type="file">
                                                        </div>

                                                    </div>
                                                    <div *ngSwitchCase="'break'" class="page-break target-droppable">
                                                        <div class="text-center position-relative">
                                                            <span
                                                                class="position-absolute page-break-head text-center bg-white px-3">{{model.value}}</span>
                                                        </div>

                                                    </div>
                                                    <div *ngSwitchCase="'date'"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model.name}}</label>
                                                        <div class="input-group">
                                                            <input class="form-control non-clickable" [minDate]="model.minVal"
                                                                [maxDate]="model.maxVal" placeholder="yyyy-mm-dd" (click)="d.toggle()"
                                                                name="dp" [(ngModel)]="model.value" ngbDatepicker
                                                                #d="ngbDatepicker">
                                                            <div class="input-group-append">
                                                                <div class="input-group-text calendar"
                                                                    (click)="d.toggle()" type="button"><i
                                                                        class="material-icons">date_range</i></div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div *ngSwitchCase="'time'"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model.name}}</label>
                                                        <div class="input-group">
                                                            <ngb-timepicker [(ngModel)]="model.value" [seconds]="true"></ngb-timepicker>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'radio'"
                                                        (click)="clicked($event, model, template)"
                                                        class="form-group-rating">
                                                        <label>{{model.name}}</label>
                                                        <div class="form-group">

                                                            <div (click)="model.value = option.label"
                                                                class="custom-control custom-radio"
                                                                *ngFor="let option of model.options">
                                                                <input name="radio" [value]="model.value"
                                                                    [checked]="model.value === option.label"
                                                                    id="radio_builder__{{option.label}}" type="radio"
                                                                    class="custom-control-input">
                                                                <label for="radio_builder__{{option.label}}"
                                                                    class="custom-control-label">{{option.label}}</label>
                                                            </div>


                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'rating'"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model.name}}</label>
                                                        <br />
                                                        <div class="row">
                                                            <div class="col-2">
                                                            </div>
                                                            <div style="padding: 0;
                                                         justify-content: center;    margin: 0 !important;"
                                                                class="custom-control custom-radio custom-control-inline col-2"
                                                                *ngFor="let option of model.ratingScale[model.selectedRatingScale]">
                                                                {{option}}
                                                            </div>
                                                        </div>
                                                        <div class="row" *ngFor="let item of model.ratingOptions">
                                                            <div class="col-2" style="max-width: 15%;">{{item.label}}
                                                            </div>
                                                            <div style="max-width: 15%;justify-content: center;"
                                                                class="custom-control custom-radio custom-control-inline col-2"
                                                                *ngFor="let option of model.ratingScale[model.selectedRatingScale]">
                                                                <div class="custom-control custom-radio">
                                                                    <input [value]="item.value"
                                                                        [checked]="item.value === option"
                                                                        id="radio_0{{option}}" type="radio"
                                                                        class="custom-control-input">
                                                                    <label class="custom-control-label"
                                                                        for="radio_0{{option}}"> </label>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div *ngSwitchCase="'checkbox'" class="form-group"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model.name}}</label>
                                                        <div (click)="checkBox($event, model, option)"
                                                            *ngFor="let option of model.options"
                                                            class="custom-control custom-checkbox">
                                                            <input type="checkbox"
                                                                id="checkbox_builder_{{model.uiIndexId}}{{option.label}}"
                                                                name="checkbox_builder_{{model.uiIndexId}}__{{option.label}}"
                                                                [checked]="model.value.includes(option.label)"
                                                                [value]="option.label" class="custom-control-input">
                                                            <label class="custom-control-label"
                                                                for="checkbox_builder_{{model.uiIndexId}}{{option.label}}">{{option.label}}</label>
                                                        </div>
                                                    </div>
                                                    <div *ngSwitchCase="'dropdown'"
                                                        (click)="clicked($event, model, template)" class="form-group">
                                                        <label class="col-form-label">{{model.name}}</label>
                                                        <select [(ngModel)]="model.value" class="custom-select">
                                                            <option *ngFor="let option of model.options"
                                                                [value]="option.label">
                                                                {{option.label}}</option>
                                                        </select>

                                                    </div>
                                                    <div *ngSwitchCase="'sign'"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model.name}}</label>
                                                        <app-signature-field [model]="model"></app-signature-field>

                                                    </div>

                                                    <div *ngSwitchCase="'phoneNumber'"
                                                        class="page-break target-droppable"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model.name}}</label>
                                                        <input type="tel" class="form-control" id="phoneNumber_{{model.uiIndexId}}"
                                                            [(ngModel)]="model.value" name="tel" #name="ngModel"
                                                            [attr.maxlength]="model.maxVal"
                                                            [attr.minlength]="model.minVal"
                                                            [attr.placeholder]="model.placeholder"
                                                            [required]="checkForDependency(model)" autocomplete="off">
                                                    </div>
                                                    <div *ngSwitchCase="'email'" class="page-break target-droppable"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model.name}}</label>
                                                        <input type="email" class="form-control" id="email_{{model.uiIndexId}}"
                                                            [(ngModel)]="model.value" name="email" #name="ngModel"
                                                            [attr.maxlength]="model.maxVal"
                                                            [attr.minlength]="model.minVal"
                                                            [attr.placeholder]="model.placeholder"
                                                            [required]="checkForDependency(model)" autocomplete="off">
                                                    </div>
                                                    <div *ngSwitchCase="'website'" class="page-break target-droppable"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model.name}}</label>
                                                        <input type="text" class="form-control" id="website"
                                                            [(ngModel)]="model.value" name="website" #name="ngModel"
                                                            [attr.maxlength]="model.maxVal"
                                                            [attr.minlength]="model.minVal"
                                                            [attr.placeholder]="model.placeholder"
                                                            [required]="checkForDependency(model)" autocomplete="off">

                                                    </div>
                                                    <div *ngSwitchCase="'text-box'"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model?.name}}</label>
                                                        <textarea [(ngModel)]="model.value" id="text_area"
                                                            name="text area" cols="40" rows="5"
                                                            [attr.maxlength]="model.maxVal"
                                                            [attr.minlength]="model.minVal"
                                                            class="form-control"></textarea>

                                                    </div>
                                                    <div *ngSwitchCase="'password'"
                                                        (click)="clicked($event, model, template)">
                                                        <label>{{model?.name}}</label>
                                                        <input type="password" class="form-control" id="input_password_{{model.uiIndexId}}"
                                                            [(ngModel)]="model.value" name="website" #name="ngModel"
                                                            [attr.maxlength]="model.maxVal"
                                                            [attr.minlength]="model.minVal"
                                                            [attr.placeholder]="model.placeholder">

                                                    </div>
                                                    <div *ngSwitchDefault (click)="clicked($event, model, template)">
                                                        <label>{{model?.name}}</label>
                                                        <app-ui-input [model]="model"
                                                            [targetBuilderTools]="targetBuilderTools"
                                                            *ngIf="!model?.dependUpon || checkForDependency(model) ">
                                                        </app-ui-input>

                                                    </div>
                                                </div>
                                            </ng-template>
                                        </ngx-dnd-container>
                                        <!--  <div>
                                            <div class="shadow">

                                                <ngx-dnd-container class="dummy-c droppableContainer" [model]="dummyContainer" dropZone="builder-target" (drop)="drop2($event)" direction="mixed">
                                                    <i class="material-icons"> add </i>Drag and Drop Here
                                                </ngx-dnd-container>
                                            </div>
                                        </div> -->
                                        <div *ngIf="showPaymentFields()" (click)="selectPayment()"
                                            class="item-payment-wrap">

                                            <!--    <div>
                                                <span>Line Items</span>
                                                <span>Sub Total</span>
                                                <span>Amount Due</span>
                                            </div> -->
                                            <div class="row lower" *ngIf="paymentSetting.showLineItems">

                                                <div  *ngFor="let payment of payments" class="col-12 text-right">{{payment.name}} <span class="pl-2">$
                                                        {{payment.value}}</span></div>

                                            </div>
                                            <div class="row lower">
                                                <div *ngIf="paymentSetting.showSubTotal" class="col-12 text-right">
                                                    <strong>Sub Total</strong><span class="pl-2">$ {{getSubTotal()}}</span>
                                                </div>
                                            </div>
                                            <hr  *ngIf="paymentSetting.extraBill?.length > 0" class="mb-4">
                                            <div *ngIf="paymentSetting.extraBill?.length > 0"  class="row lower">
                                                <div class="col-12 text-right" *ngFor="let item of paymentSetting.extraBill">
                                                    <strong>{{item.name}}</strong><span class="pl-2">$ {{item.value ? item.value : 0}}</span>
                                                </div>
                                            </div>
                                            <hr class="mb-4">
                                            <div class="row lower">
                                                <div class="col-12 text-right"><strong>Amount Due</strong> <span
                                                        class="pl-2">$ {{getAmountDue()}}</span></div>

                                            </div>
                                        </div>
                                        <!-- <div>
                                    </div> -->
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </li>
                    <li *ngIf="builderObj?.formType !== 'WorkFlow' || (!builderObj.hasEntries && builderObj?.formType === 'WorkFlow')" [ngbNavItem]="2" ngbNavItem>
                        <a ngbNavLink (click)="saveForm()"><i class="material-icons"> publish </i>Publish</a>
                        <ng-template ngbNavContent>

                            <app-exported-view [url]="url" [styling]="styling" [elements]="targetBuilderTools"></app-exported-view>

                        </ng-template>
                    </li>

                    <li [ngbNavItem]="3" ngbNavItem>
                        <a ngbNavLink> <i class="material-icons"> list </i>Entries</a>
                        <ng-template ngbNavContent>
                            <div class="container-fluid">


                                <div class="row fixed-table-toolbar mt-3" id="toolbar">
                                    <div class="col-md-6">
                                        <div class="bars">

                                            <button type="button" class="btn btn-primary btn-bf mr-2"
                                                (click)="getNewEntries()"> Refresh </button>


                                            <div class="d-inline-block" ngbDropdown #myDrop="ngbDropdown">
                                                <button class="btn btn-primary btn-bf mr-2" id="filterDropdown"
                                                    ngbDropdownAnchor (focus)="myDrop.open()">Filters</button>
                                                <div ngbDropdownMenu aria-labelledby="filterDropdown">
                                                    <button ngbDropdownItem (click)="filter = null">All</button>
                                                    <button ngbDropdownItem
                                                        (click)="filter = 'Submitted'">Submitted</button>
                                                    <button ngbDropdownItem
                                                        (click)="filter = 'Reviewed'">Reviewed</button>
                                                </div>
                                            </div>

                                            <div class="d-inline-block" ngbDropdown #actionsDropdown="ngbDropdown">
                                                <button class="btn btn-primary btn-bf mr-2" id="actionsDropdown"
                                                    ngbDropdownAnchor (focus)="actionsDropdown.open()">Actions</button>
                                                <div ngbDropdownMenu aria-labelledby="actionsDropdown">
                                                    <button ngbDropdownItem (click)="deleteEntry()">Delete</button>
                                                    <button ngbDropdownItem (click)="export()">Export</button>
                                                </div>
                                            </div>

                                            <div class="d-inline-block">
                                                <button class="btn btn-primary btn-bf mr-2" id="newEntry"
                                                    (click)="viewEntryPanel = !viewEntryPanel">New Entry</button>
                                                <!-- <div ngbDropdownMenu aria-labelledby="newEntry">
                                                    <button ngbDropdownItem>Action - 1</button>
                                                    <button ngbDropdownItem>Another Action</button>
                                                    <button ngbDropdownItem>Something else is here</button>
                                                </div> -->
                                            </div>




                                        </div>
                                    </div>

                                    <div *ngIf="viewEntryPanel" class="entry-panel shadow py-2 bg-white"
                                        style="right: 0%;">
                                        <button type="button"  (click)="closeIframes()"class="close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                        <iframe [src]="FormUrl()" width="100%" height="100%"
                                            frameborder="0"></iframe>
                                    </div>
                                    <div *ngIf="viewSpecificEntry" class="entry-panel shadow py-2 bg-white"
                                        style="right: 0%;">
                                        <button type="button" (click)="closeIframes()" class="close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                        <iframe [src]="viewSpecificEntry" width="100%" height="100%"
                                            frameborder="0"></iframe>
                                    </div>
                                    <div class="col-md-6">
                                        <div *ngIf="entries?.rows?.length > 0" class="tool-filter text-right">

                                            <div class="d-inline-block" ngbDropdown #column="ngbDropdown">
                                                <button class="btn btn-primary btn-bf mr-2" id="column"
                                                    ngbDropdownAnchor (focus)="column.open()">Columns</button>
                                                <div ngbDropdownMenu aria-labelledby="column" class="">
                                                    <div ngbDropdownItem *ngFor="let item of entries.columns"
                                                        (click)="item.view = !item.view" class="">
                                                        <!-- <label> <input data-index="0" [checked]="item.view" name="btSelectItem" type="checkbox">&nbsp;{{item.headerName}}</label> -->
                                                        <div class="custom-control custom-checkbox">
                                                            <input data-index="0" [checked]="item.view"
                                                                name="btSelectItem" type="checkbox"
                                                                class="custom-control-input">
                                                            <label class="custom-control-label"
                                                                for="SignUpTermsConditions">{{item.headerName}}

                                                            </label>
                                                        </div>

                                                    </div>
                                                </div>





                                            </div>
                                        </div>
                                    </div>



                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="table-responsive-main table-responsive">
                                        <table class="table mt-3  text-center border" id="table-id" data-toggle="table"
                                            data-search="true" data-filter-control="true" data-show-export="true"
                                            data-show-refresh="true" data-show-toggle="true" data-pagination="true"
                                            data-toolbar="#toolbar">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th *ngIf="entries.columns.length > 0" data-field="state"
                                                        data-checkbox="true"><input data-index="0"
                                                            name="btnAllSelectItem" type="checkbox"></th>

                                                    <ng-container *ngFor="let item of entries.columns">
                                                        <th *ngIf="item.view" data-field="prenom"
                                                            data-filter-control="input" data-sortable="true">
                                                            {{item.headerName}}</th>
                                                    </ng-container>


                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ng-container *ngFor="let row of entries.rows; let rowIndex = index">
                                                    <tr *ngIf="!filter || (filter && filter === row[1])">
                                                        <td class="bs-checkbox ">
                                                            <input data-index="0"
                                                                name="btSelectItem" (click)="selectEntry(rowIndex)"
                                                                type="checkbox">
                                                            </td>
                                                        <ng-container (click)="viewEntry(rowIndex)"  *ngFor="let col of entries.columns">

                                                            <td *ngIf="col.view && row?.[col?.field] !== 'No_value' && col.headerName !== 'Signature'">
                                                                {{row?.[col?.field]}}
                                                            </td>
                                                            <td *ngIf="col.view && row?.[col?.field] === 'No_value'">
                                                                <!-- <span class="empty-field">{{"<No Entry>"}}</span> -->
                                                            </td>
                                                            <td *ngIf="col.headerName === 'Signature'">
                                                                <img [src]="row?.[col?.field]" height="100px" width="100px" />
                                                            </td>
                                                        </ng-container>


                                                    </tr>
                                                </ng-container>


                                            </tbody>
                                        </table>

                                        <div class="alert alert-warning my-5" role="alert"> No Records found !</div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </ng-template>
                    </li>
                </ul>
            </div>
            <div class="col-md-2 text-center">
                <div ngbDropdown class="d-inline-block btn-group w-100 dropdown-split-warning">
                    <button class="btn border text-muted w-100 text-left" id="view-user-activity" ngbDropdownToggle>View
                        Activity<i class="material-icons float-right"> expand_more
                        </i></button>
                    <div ngbDropdownMenu aria-labelledby="view-user-activity"
                        class="forms-activity-dropdown overflow-auto scroller w-100 py-0">
                        <a *ngFor="let activity of formActivities; let i = index" (click)="getFormDataByActivities(activity.id)" class="border-bottom py-2" ngbDropdownItem>
                            <span class="version-number font-weight-bold">Version {{i + 1}}</span>
                            <div>by <i>{{activity.userName}}</i> <span
                                    class="float-right version-time badge badge-primary">{{activity.createdOn}}</span></div>
                        </a>
                    </div>
                </div>
            </div>

        </div>


        <div [ngbNavOutlet]="nav" class="mt-0 tab-content"></div>

    </div>





    <!-- Footer Start-->
    <!-- <div class="footer p-3 bg-dark border-top border-5 border-bf">
        <div class="footer-copyright-wrapper text-center col">
            <span class="monochrome-logo-wrapper mr-2">
                <svg class="monochrome-logo" width="20px" height="100%" viewBox="0 0 152 185" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"
                    xmlns:serif="http://www.serif.com/"
                    style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
                    <g transform="matrix(0.429851,0,0,0.429851,-95.0387,-38.8813)">
                        <g transform="matrix(8.79,0,0,8.79,-953.066,-846.569)">
                            <path
                                d="M146.699,151.251C146.666,151.275 146.631,151.296 146.596,151.315L140.138,155.27C140.112,155.286 140.084,155.303 140.057,155.316L140.036,155.327C139.884,155.399 139.712,155.431 139.534,155.409C139.405,155.395 139.287,155.354 139.183,155.293L139.169,155.285L139.164,155.281L139.126,155.257L139.113,155.249L139.108,155.245L139.096,155.235L139.078,155.223L139.072,155.218L139.061,155.208L139.044,155.194L139.038,155.188L139.028,155.179L139.021,155.174L139.005,155.159L138.995,155.148L138.989,155.142L138.98,155.134L138.951,155.101L138.943,155.091L138.937,155.085L138.928,155.073L138.922,155.066L138.914,155.056L138.91,155.05C138.878,155.009 138.851,154.964 138.827,154.917L138.818,154.9L138.817,154.896C138.745,154.745 138.712,154.571 138.734,154.394L139.631,146.847C139.634,146.811 139.638,146.773 139.644,146.739L140.997,135.363C141.014,135.222 141.063,135.092 141.134,134.979L141.133,134.978L142.637,132.632L144.365,129.935C144.637,129.508 145.204,129.383 145.63,129.655C146.057,129.928 146.181,130.495 145.909,130.921L144.181,133.618C143.903,134.052 143.827,134.559 143.929,135.028L143.931,135.027C144.033,135.496 144.313,135.926 144.745,136.204C145.178,136.48 145.686,136.556 146.154,136.456L146.154,136.454C146.622,136.351 147.05,136.072 147.326,135.644L147.328,135.642L147.33,135.639L149.058,132.941C149.331,132.515 149.897,132.39 150.324,132.663C150.75,132.935 150.875,133.502 150.601,133.928L148.9,136.583L148.899,136.586L148.897,136.588C148.883,136.614 148.868,136.638 148.851,136.662C148.592,137.086 148.523,137.58 148.622,138.034L148.624,138.034C148.724,138.49 148.992,138.91 149.404,139.188C149.428,139.202 149.451,139.217 149.474,139.232C149.899,139.492 150.392,139.56 150.847,139.462L150.846,139.46C151.309,139.358 151.733,139.085 152.01,138.664L152.021,138.649L152.022,138.646L153.751,135.947C154.023,135.521 154.589,135.397 155.016,135.669C155.442,135.941 155.567,136.508 155.294,136.934L153.593,139.59L153.592,139.592L153.59,139.595C153.576,139.62 153.56,139.645 153.544,139.668C153.285,140.095 153.215,140.588 153.315,141.044C153.415,141.498 153.683,141.917 154.096,142.194C154.122,142.208 154.144,142.224 154.167,142.239C154.592,142.499 155.084,142.566 155.54,142.467L155.588,142.458C156.037,142.348 156.447,142.072 156.715,141.652L156.715,141.653L158.445,138.954C158.716,138.528 159.283,138.403 159.709,138.676C160.135,138.948 160.26,139.515 159.989,139.941L158.266,142.629L158.26,142.639L156.756,144.986L156.754,144.985C156.682,145.099 156.583,145.198 156.46,145.272L146.699,151.251ZM154.552,144.296C154.066,144.22 153.586,144.043 153.148,143.763L153.144,143.761C152.288,143.211 151.732,142.359 151.529,141.43C151.511,141.35 151.496,141.269 151.484,141.188C151.403,141.21 151.323,141.231 151.241,141.249L151.241,141.247L151.238,141.248C150.312,141.45 149.309,141.302 148.454,140.756L148.451,140.753C147.593,140.204 147.038,139.354 146.834,138.428L146.837,138.427L146.836,138.424C146.819,138.343 146.803,138.262 146.791,138.18C146.71,138.204 146.629,138.224 146.547,138.242L146.547,138.24L146.544,138.241C145.618,138.443 144.614,138.295 143.759,137.747C143.317,137.464 142.956,137.103 142.682,136.691L141.521,146.438L146.181,149.424L154.552,144.296Z"
                                style="fill:rgb(108,117,125);" />
                            <path
                                d="M156.693,112.159C160.838,108.452 163.61,112.814 166.131,108.134C161.973,110.229 158.391,105.077 156.693,112.159ZM160.574,135.919L147.338,127.44C147.338,127.44 146.828,122.337 148.677,119.181C150.527,116.023 152.395,115.614 152.395,115.614C152.395,115.614 151.437,117.042 151.367,118.169C151.295,119.295 151.644,120.04 151.644,120.04C151.644,120.04 152.5,115.247 158.257,113.987C163.25,112.893 170.175,113.301 169.965,106.601C173.638,114.49 171.597,126.759 164.808,130.204C166.163,129.998 168.181,129.844 168.991,127.593C168.517,131.784 165.42,135.667 160.574,135.919Z"
                                style="fill:rgb(108,117,125);" />
                        </g>
                        <path
                            d="M397.524,135.646C300.086,135.646 221.097,214.635 221.097,312.073C221.097,409.446 300.151,488.5 397.524,488.5C494.896,488.5 573.951,409.446 573.951,312.073C573.951,291.221 570.254,270.534 563.032,250.972L550.284,255.678C556.95,273.733 560.361,292.827 560.361,312.073C560.361,401.945 487.396,474.911 397.524,474.911C307.651,474.911 234.686,401.945 234.686,312.073C234.686,222.14 307.591,149.235 397.524,149.235L397.524,135.646Z"
                            style="fill:rgb(108,117,125);" />
                    </g>
                </svg>
            </span>
            <span class="footer-copyright-text text-muted">
                Blazeforms  2021 Metagauss, Inc.
            </span>
        </div>
    </div> -->

</ng-container>
<ng-template #loading>
    <div class="loader text-center vh-100 w-100" id="loader-4">
        <span></span>
        <span></span>
        <span></span>
      </div>
</ng-template>




<!-- <ng-template #popContent>
    <div class="row my-2">
        <div class="col-md-12"><i class="material-icons">content_copy</i>Duplicate</div>
    </div>
    <div class="row my-2">
        <div class="col-md-12"><i class="material-icons">delete</i> Delete</div>
    </div>
</ng-template>
<button type="button" class="btn btn-secondary" [ngbPopover]="popContent">
    popover!
</button> -->
